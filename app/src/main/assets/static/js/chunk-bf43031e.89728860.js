(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf43031e"],{"0794":function(t,e,r){},"1b6a":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-container"},[e("div",{staticClass:"car-info-container box-container"},[e("img",{attrs:{src:t.checkCarImagePath(t.carInfo.carBrand,t.carInfo.carSeries)}}),e("span",{staticClass:"car-number"},[t._v(t._s(t.carInfo.carNumber))]),e("span",{staticClass:"car-brand"},[t._v(t._s(t.carInfo.carBrand)+" "+t._s(t.carInfo.carSeries))])]),e("div",{staticClass:"search-container"},[e("van-search",{class:{"inpu-focus":t.inputFocus},attrs:{placeholder:"司机姓名/电话搜索",shape:"round"},on:{focus:function(e){t.inputFocus=!0},blur:function(e){t.inputFocus=!1},search:t.handleSearchClick,clear:t.handleInputClear,input:t.handleSearchInput},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),e("div",{staticClass:"driver-container"},[e("van-list",{attrs:{offset:"30",finished:t.finished,"finished-text":"没有更多了..."},on:{load:t.getDriverList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.driverList,(function(r,i){return e("div",{key:i,staticClass:"driver-item-container",on:{click:function(e){return t.handleDriverClick(r)}}},[e("span",{staticClass:"driver-name"},[t._v(t._s(r.driver))]),e("span",{staticClass:"driver-phone"},[t._v("电话："+t._s(r.phone))])])})),0)],1),e("div",{staticClass:"default-button-container-one"},[e("van-button",{attrs:{icon:"arrow-left",block:"",type:"default",round:""},on:{click:function(e){return t.handleCancel()}}},[t._v("上一步")])],1)])},n=[],a=(r("4de4"),r("7db0"),r("caad"),r("14d9"),r("f4b3"),r("e9c4"),r("b64b"),r("d3b7"),r("2532"),r("0643"),r("2382"),r("fffc"),r("0b8e")),s=r("f527"),c={name:"DispathDriver",data:function(){return{loading:!1,finished:!1,searchText:"",inputFocus:!1,orderDetail:{},type:"",carInfo:{},driverList:[],originalDriverList:[],checkCarImagePath:a["a"]}},created:function(){this.orderDetail=JSON.parse(this.$route.params.obj),this.type=this.$route.params.type,this.carInfo=this.orderDetail.reqAssignments[this.orderDetail.reqAssignments.length-1]},methods:{getDriverList:function(){var t={classDateEnd:this.orderDetail.usageDate+" "+this.orderDetail.usageTime,classId:"none",flag:0,unitCode:"",vinNumber:this.carInfo.vinNumber};"dispatch"==this.type?(t.unitCode=this.orderDetail.reassignUnitCode||this.orderDetail.assignUnitCode||this.orderDetail.deptId,this.getAvailableDriver(t)):"changeDispatch"==this.type?(t.unitCode=this.orderDetail.reassignUnitCode||this.orderDetail.assignUnitCode||this.orderDetail.deptId,"0"==this.orderDetail.createType?this.getAvailableDriver(t):"1"==this.orderDetail.createType&&this.getRGAvailableDriver(t)):"artificial"==this.type&&(t.unitCode=this.orderDetail.unitCode,this.getRGAvailableDriver(t))},getAvailableDriver:function(t){var e=this,r=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0});Object(s["h"])(t).then((function(t){var r=t.data;e.loading=!0,e.finished=!0,e.driverList=r,e.originalDriverList=r})).catch((function(){})).finally((function(){r.clear()}))},getRGAvailableDriver:function(t){var e=this,r=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0});Object(s["l"])(t).then((function(t){var r=t.data;e.loading=!0,e.finished=!0,e.driverList=r,e.originalDriverList=r})).catch((function(){})).finally((function(){r.clear()}))},handleDriverClick:function(t){var e=this.orderDetail.reqAssignments.find((function(e){return e.driverCode==t.driverCode&&"1"!=e.restatus}));e?this.$notify({type:"warning",message:"该司机已经选择过，请重新选择!"}):(this.orderDetail.reqAssignments[this.orderDetail.reqAssignments.length-1]=Object.assign(this.orderDetail.reqAssignments[this.orderDetail.reqAssignments.length-1],t),this.$router.push({name:"ConfirmDistribute",params:{obj:JSON.stringify(this.orderDetail),type:this.type}}))},handleInputClear:function(){this.handleSearchClick()},handleSearchInput:function(){this.searchText||this.handleSearchClick()},handleSearchClick:function(){var t=this;this.driverList=this.originalDriverList.filter((function(e){return e.driver.includes(t.searchText)||e.phone&&e.phone.includes(t.searchText)}))},handleCancel:function(){this.$router.back()}}},o=c,u=(r("ab3a"),r("2877")),d=Object(u["a"])(o,i,n,!1,null,"4e3bac46",null);e["default"]=d.exports},ab3a:function(t,e,r){"use strict";r("0794")},f527:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return c})),r.d(e,"n",(function(){return o})),r.d(e,"g",(function(){return u})),r.d(e,"j",(function(){return d})),r.d(e,"p",(function(){return l})),r.d(e,"f",(function(){return h})),r.d(e,"r",(function(){return f})),r.d(e,"l",(function(){return p})),r.d(e,"h",(function(){return v})),r.d(e,"e",(function(){return g})),r.d(e,"o",(function(){return b})),r.d(e,"m",(function(){return m})),r.d(e,"b",(function(){return D})),r.d(e,"q",(function(){return C})),r.d(e,"i",(function(){return O})),r.d(e,"k",(function(){return j}));var i=r("b775"),n="",a=n+"/dispatch/carPic";function s(t){return Object(i["a"])({url:"/dispatch/dispatchList",method:"GET",params:t})}function c(t){return Object(i["a"])({url:"/dispatch/dispatchedList",method:"GET",params:t})}function o(t){return Object(i["a"])({url:"/dispatch/historyList",method:"GET",params:t})}function u(t){return Object(i["a"])({url:"/dispatch/getAvailableCar",method:"GET",params:t})}function d(t){return Object(i["a"])({url:"/vehicleInfo/getAssignCount",method:"GET",params:t})}function l(t){return Object(i["a"])({url:"/dispatch/saveOrderDispatch",method:"POST",data:t})}function h(t){return Object(i["a"])({url:"/dispatch/reassignment",method:"POST",data:t})}function f(t,e){return Object(i["a"])({url:"/vehicleInfo/".concat(e?"getResAvailableCar":"getAvailableCar"),method:"get",params:t})}function p(t){return Object(i["a"])({url:"/gcjcDriverClass/getRGAvailableDriver",method:"get",params:t})}function v(t){return Object(i["a"])({url:"/gcjcDriverClass/getAvailableDriver",method:"get",params:t})}function g(t){return Object(i["a"])({url:"/gcywVehicleRequest/saveOrderDispatch",method:"POST",data:t})}function b(t){return Object(i["a"])({url:"/gcywVehicleRequest/reassignment",method:"POST",data:t})}function m(t){return Object(i["a"])({url:"/gcjcTurnUnit/listAll",method:"GET",params:t})}function D(t){return Object(i["a"])({url:"/gcywVehicleRequest/redispatch",method:"POST",data:t})}function C(t){return Object(i["a"])({url:"/gcywVehicleRequest/updateRessUnit",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/system/unit/getAvailableUnit",method:"GET",params:t})}function j(t){return Object(i["a"])({url:"/dept/tree",method:"GET",params:t})}}}]);