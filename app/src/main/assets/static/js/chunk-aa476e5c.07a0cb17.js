(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa476e5c"],{"5b81":function(t,e,n){"use strict";var r=n("23e7"),a=n("c65b"),i=n("e330"),c=n("1d80"),o=n("1626"),u=n("7234"),s=n("44e7"),d=n("577e"),l=n("dc4a"),h=n("90d8"),f=n("0cb2"),p=n("b622"),g=n("c430"),m=p("replace"),b=TypeError,v=i("".indexOf),O=i("".replace),D=i("".slice),j=Math.max;r({target:"String",proto:!0},{replaceAll:function(t,e){var n,r,i,p,y,C,k,w,T,q,$=c(this),R=0,L="";if(!u(t)){if(n=s(t),n&&(r=d(c(h(t))),!~v(r,"g")))throw new b("`.replaceAll` does not allow non-global regexes");if(i=l(t,m),i)return a(i,t,$,e);if(g&&n)return O(d($),t,e)}p=d($),y=d(t),C=o(e),C||(e=d(e)),k=y.length,w=j(1,k),T=v(p,y);while(-1!==T)q=C?d(e(y,T,p)):f(y,p,T,[],void 0,e),L+=D(p,R,T)+q,R=T+k,T=T+w>p.length?-1:v(p,y,T+w);return R<p.length&&(L+=D(p,R)),L}})},6110:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("general-order-detail",{attrs:{orderDetail:t.orderDetail,approveLogList:t.approveLogList,hasButton:"4"==t.orderDetail.status||"5"==t.orderDetail.status||"7"==t.orderDetail.status||"8"==t.orderDetail.status||"9"==t.orderDetail.status||"10"==t.orderDetail.status||"11"==t.orderDetail.status}}),"4"==t.orderDetail.status&&"否"===t.orderDetail.reassignStatus?e("div",{staticClass:"default-button-container-three"},[e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleCancel()}}},[t._v("取消订单")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleDispatch()}}},[t._v("派单")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleTransfer()}}},[t._v("转派")])],1):t._e(),"4"==t.orderDetail.status&&"是"===t.orderDetail.reassignStatus&&"0"==t.orderDetail.reassignStr?e("div",{staticClass:"default-button-container-two"},[e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleDispatch()}}},[t._v("派单")]),e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleChangeReject()}}},[t._v("转派拒绝")])],1):t._e(),"4"==t.orderDetail.status&&"是"===t.orderDetail.reassignStatus&&"1"==t.orderDetail.reassignStr?e("div",{staticClass:"default-button-container-one"},[e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleChangeCancel()}}},[t._v("转派取消")])],1):t._e(),"5"==t.orderDetail.status||"7"==t.orderDetail.status||"8"==t.orderDetail.status?e("div",{staticClass:"default-button-container-three"},[e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleCancel()}}},[t._v("取消订单")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleCopy()}}},[t._v("复制订单")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleChange()}}},[t._v("改派")])],1):t._e(),"9"==t.orderDetail.status||"10"==t.orderDetail.status||"11"==t.orderDetail.status?e("div",{staticClass:"default-button-container-one"},[e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleCopy()}}},[t._v("复制订单")])],1):t._e()],1)},a=[],i=(n("14d9"),n("f4b3"),n("e9c4"),n("d3b7"),n("8a60")),c=n("f8b7"),o=n("f527"),u=n("986e"),s=n("fd99"),d={name:"DispatchDetails",mixins:[s["a"]],components:{GeneralOrderDetail:i["a"]},data:function(){return{id:"",orderDetail:{},approveLogList:[]}},created:function(){this.id=this.$route.params.id,this.getOrderDetail(),this.getOrderApprovalLog(),u["a"].$off("cancelOrderConfirm"),u["a"].$on("cancelOrderConfirm",function(t){this.requestCancelOrder(t)}.bind(this))},activated:function(){this.$route.params.refresh&&(this.getOrderDetail(),this.getOrderApprovalLog())},methods:{getOrderDetail:function(){var t=this,e=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0}),n={id:this.id};Object(c["f"])(n).then((function(e){var n=e.data;t.orderDetail=n.list[0]})).catch((function(){})).finally((function(){e.clear()}))},getOrderApprovalLog:function(){var t=this,e=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0}),n={reqId:this.id};Object(c["i"])(n).then((function(e){var n=e.data;t.approveLogList=n})).catch((function(){})).finally((function(){e.clear()}))},handleCancel:function(){this.$router.push({name:"CancelOrderEdit",params:{}})},handleDispatch:function(){this.$router.push({name:"DispatchVehicle",params:{obj:JSON.stringify(this.orderDetail),type:"dispatch"}})},handleTransfer:function(){this.$router.push({name:"ChangeOder",params:{obj:JSON.stringify(this.orderDetail)}})},handleChangeReject:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否拒绝转派?"}).then((function(){t.requestChangeCancel()})).catch((function(){}))},handleChangeCancel:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否取消转派?"}).then((function(){t.requestChangeCancel()})).catch((function(){}))},requestChangeCancel:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在取消..",forbidClick:!0}),n=[],r={id:this.id};n.push(r),Object(o["q"])(n).then((function(e){var n=e.message;t.$notify({type:"success",message:n}),t.$store.dispatch("DispathOrder/triggerFefresh",!0),t.$router.push({name:"DispatchOrderList",params:{}})})).catch((function(e){t.$toast.fail("操作失败!")})).finally((function(){e.clear()}))},handleCopy:function(){this.$router.push({name:"DispathApply",params:{id:this.orderDetail.id}})},handleChange:function(){this.$router.push({name:"DispatchVehicle",params:{obj:JSON.stringify(this.orderDetail),type:"changeDispatch"}})},requestCancelOrder:function(t){var e=this,n=this.$toast.loading({duration:0,message:"正在取消..",forbidClick:!0}),r=[],a={id:this.id,closeReason:t};r.push(a),Object(c["j"])(r).then((function(t){var n=t.message;e.$notify({type:"success",message:n}),e.$store.dispatch("DispathOrder/triggerFefresh",!0),e.$router.push({name:"DispatchOrderList",params:{}})})).catch((function(t){e.$toast.fail("取消失败!")})).finally((function(){n.clear()}))}}},l=d,h=n("2877"),f=Object(h["a"])(l,r,a,!1,null,"66cf5afe",null);e["default"]=f.exports},"986e":function(t,e,n){"use strict";var r=n("2b0e"),a=new r["d"]({});e["a"]=a},f527:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return o})),n.d(e,"n",(function(){return u})),n.d(e,"g",(function(){return s})),n.d(e,"j",(function(){return d})),n.d(e,"p",(function(){return l})),n.d(e,"f",(function(){return h})),n.d(e,"r",(function(){return f})),n.d(e,"l",(function(){return p})),n.d(e,"h",(function(){return g})),n.d(e,"e",(function(){return m})),n.d(e,"o",(function(){return b})),n.d(e,"m",(function(){return v})),n.d(e,"b",(function(){return O})),n.d(e,"q",(function(){return D})),n.d(e,"i",(function(){return j})),n.d(e,"k",(function(){return y}));var r=n("b775"),a="",i=a+"/dispatch/carPic";function c(t){return Object(r["a"])({url:"/dispatch/dispatchList",method:"GET",params:t})}function o(t){return Object(r["a"])({url:"/dispatch/dispatchedList",method:"GET",params:t})}function u(t){return Object(r["a"])({url:"/dispatch/historyList",method:"GET",params:t})}function s(t){return Object(r["a"])({url:"/dispatch/getAvailableCar",method:"GET",params:t})}function d(t){return Object(r["a"])({url:"/vehicleInfo/getAssignCount",method:"GET",params:t})}function l(t){return Object(r["a"])({url:"/dispatch/saveOrderDispatch",method:"POST",data:t})}function h(t){return Object(r["a"])({url:"/dispatch/reassignment",method:"POST",data:t})}function f(t,e){return Object(r["a"])({url:"/vehicleInfo/".concat(e?"getResAvailableCar":"getAvailableCar"),method:"get",params:t})}function p(t){return Object(r["a"])({url:"/gcjcDriverClass/getRGAvailableDriver",method:"get",params:t})}function g(t){return Object(r["a"])({url:"/gcjcDriverClass/getAvailableDriver",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/gcywVehicleRequest/saveOrderDispatch",method:"POST",data:t})}function b(t){return Object(r["a"])({url:"/gcywVehicleRequest/reassignment",method:"POST",data:t})}function v(t){return Object(r["a"])({url:"/gcjcTurnUnit/listAll",method:"GET",params:t})}function O(t){return Object(r["a"])({url:"/gcywVehicleRequest/redispatch",method:"POST",data:t})}function D(t){return Object(r["a"])({url:"/gcywVehicleRequest/updateRessUnit",method:"post",data:t})}function j(t){return Object(r["a"])({url:"/system/unit/getAvailableUnit",method:"GET",params:t})}function y(t){return Object(r["a"])({url:"/dept/tree",method:"GET",params:t})}},f8b7:function(t,e,n){"use strict";n.d(e,"l",(function(){return a})),n.d(e,"m",(function(){return i})),n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return o})),n.d(e,"n",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"f",(function(){return g})),n.d(e,"h",(function(){return m})),n.d(e,"g",(function(){return b}));var r=n("b775");function a(t){return Object(r["a"])({url:"/order/getOrderDetail",method:"GET",params:t})}function i(t){return Object(r["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:t})}function c(t){return Object(r["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:t})}function o(t){return Object(r["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:t})}function u(t){return Object(r["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:t})}function s(t){return Object(r["a"])({url:"/activiti/assigneeList",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:t})}function l(t){return Object(r["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:t})}function h(t){return Object(r["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:t})}function f(t){return Object(r["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/activiti/assigneeListByType",method:"get",params:t})}function g(t){return Object(r["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:t})}},fd99:function(t,e,n){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);