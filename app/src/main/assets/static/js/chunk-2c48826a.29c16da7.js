(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c48826a"],{1:function(t,e){},1335:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{class:["main-container","0"==t.type?"detail-container":""]},[e("div",{staticClass:"order-info box-container"},[e("div",[e("span",{staticClass:"title"},[t._v("申请单号：")]),e("span",{staticClass:"order-code"},[t._v(t._s(t.orderDetail.reqNo))])]),e("div",{staticClass:"order-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(t.orderDetail.reqStatus)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(t.orderDetail.reqStatus)))])])]),e("div",{staticClass:"apply-info box-container"},[t._m(0),e("div",[e("ul",{staticClass:"detail-ul"},[e("li",[e("span",[t._v("申请单位：")]),e("span",[t._v(t._s(t.orderDetail.unitName))])]),e("li",[e("span",[t._v("申请部门：")]),e("span",[t._v(t._s(t.orderDetail.deptName))])]),e("li",[e("span",[t._v("申请人：")]),e("span",[t._v(t._s(t.orderDetail.reqUserName))])]),e("li",[e("span",[t._v("申请人电话：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.orderDetail.reqphone))])]),e("li",{staticClass:"li-item-remark"},[e("span",[t._v("描述：")]),e("div",{staticClass:"remark-detail"},[t._v(t._s(t.orderDetail.reqDesc||"未填写"))])])])])]),t.appendixList.length>0?e("div",{staticClass:"apply-info box-container"},[t._m(1),e("div",[e("ul",{staticClass:"detail-file-ul"},t._l(t.appendixList,(function(i,n){return e("li",{key:n},[e("div",{staticClass:"appendix-info"},[e("img",{attrs:{src:t.checkFileImage(i.oldFileName)}}),e("span",{on:{click:function(e){return t.seeAttachment(i)}}},[t._v(t._s(i.oldFileName))])])])})),0)])]):t._e(),t.activittList.length>0?e("div",{staticClass:"approve-info box-container"},[t._m(2),e("div",{staticClass:"flow-info"},[e("ul",t._l(t.activittList,(function(i,n){return e("li",{key:n},[e("div",{staticClass:"top-info"},[e("img",{attrs:{src:t.checkStatusCircle(i.operateType)}}),e("span",{staticClass:"assigneeName"},[t._v(t._s(i.realName))]),e("span",{staticClass:"status"},[t._v(t._s(t.checkStatusSuccess(i.operateType)))]),e("span",{staticClass:"endTime"},[t._v(t._s(t.parseTime(i.endTime,"{y}-{m}-{d} {h}:{i}")))])]),e("div",{staticClass:"middle-info"},[e("span",{staticClass:"actName"},[t._v("审批人")]),e("span",{staticClass:"status"},[t._v(t._s(t.checkStatusError(i.operateType)))])]),"3"==i.operateType?e("div",{staticClass:"bottom-info"},[e("span",{staticClass:"message"},[t._v("审批意见："+t._s(i.message))])]):t._e()])})),0)])]):t._e(),"0"==t.type?e("div",{staticClass:"default-button-container-two"},[e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleReject()}}},[t._v("驳回")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleAdopt()}}},[t._v("通过")])],1):t._e(),e("file-preview",{key:t.timer,ref:"filePreview",attrs:{fileType:t.fileType}}),e("assignee-popup",{attrs:{assigneePopupShow:t.assigneePopupShow,assigneeList:t.assigneeList},on:{assigneeSelected:t.assigneeSelected}})],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-base.png"}}),e("span",{staticClass:"info-title"},[t._v("申请信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-file.png"}}),e("span",{staticClass:"info-title"},[t._v("附件信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-approve.png"}}),e("span",{staticClass:"info-title"},[t._v("审批流程")])])}],s=i("c7eb"),r=i("1da1"),c=(i("4de4"),i("4160"),i("baa5"),i("14d9"),i("b64b"),i("d3b7"),i("0643"),i("2382"),i("4e3e"),i("159b"),i("22af")),o=i("f8b7"),u=i("6321"),l=i("fd99"),d=i("986e"),f=i("2847"),p={name:"ChangeExamineDetail",mixins:[l["a"]],components:{AssigneePopup:u["a"],FilePreview:f["a"]},data:function(){return{orderDetail:{},appendixList:[],activittList:[],type:"",assigneePopupShow:!1,assigneeList:[],candidateUser:[],fileType:"",timer:""}},created:function(){this.orderDetail=JSON.parse(this.$route.params.obj),this.type=this.$route.params.type,this.getFileList(),this.getActivitiList(),d["a"].$off("rejectConfirm"),d["a"].$on("rejectConfirm",function(t){this.requestReject(t)}.bind(this))},methods:{getFileList:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),i={id:this.orderDetail.id};Object(c["c"])(i).then((function(e){var i=e.data;t.appendixList=i})).catch((function(t){})).finally((function(){e.clear()}))},getActivitiList:function(t){var e=this;return Object(r["a"])(Object(s["a"])().mark((function t(){var i,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),n={id:e.orderDetail.id},t.next=4,Object(c["a"])(n).then((function(t){var i=t.data;e.activittList=i})).catch((function(t){})).finally((function(){i.clear()}));case 4:case"end":return t.stop()}}),t)})))()},checkOrderStatus:function(t){return"1"==t?"待审核":"2"==t?"审核中":"3"==t?"已驳回":"4"==t?"已取消":"5"==t?"审核完成":void 0},checkStatusImage:function(t){return"1"==t?"order-dsh":"2"==t?"order-shz":"3"==t?"order-ybh":"4"==t?"order-yqx":"5"==t?"order-yhc":void 0},checkFileImage:function(t){var e=t.substr(t.lastIndexOf(".")+1);return"xlsx"==e||"xls"==e?"/static/file-excel.png":"pdf"==e?"/static/file-pdf.png":"jpg"==e||"png"==e||"jpeg"==e||"bmp"==e?"/static/file-img.png":"docx"==e||"doc"==e?"/static/file-doc.png":"txt"==e?"/static/file-txt.png":"ppt"==e?"/static/file-ppt.png":"/static/file-txt.png"},checkStatusCircle:function(t){return"1"==t||"2"==t?"/static/icon-flow-circle-blue.webp":"3"==t?"/static/icon-flow-circle-orange.png":"/static/icon-flow-circle-gray.png"},checkStatusSuccess:function(t){return"1"==t?"（发起人）":"2"==t?"（通过）":""},checkStatusError:function(t){return"3"==t?"不通过":""},seeAttachment:function(t){var e=this,i=t.fileName.substr(t.fileName.lastIndexOf(".")+1);this.timer=(new Date).getTime(),this.$nextTick((function(){if("xlsx"==i)e.fileType="excel",e.$refs.filePreview.showXlsx(t.fileName);else if("pdf"==i)e.fileType="pdf",e.$refs.filePreview.showPdf(t.fileName);else if("jpg"==i||"png"==i||"jpeg"==i||"bmp"==i){var n=e.appendixList.filter((function(t){return"jpg"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"png"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"jpeg"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"bmp"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)}));e.fileType="img",e.$refs.filePreview.showImage(t,n)}else"docx"==i?(e.fileType="word",e.$refs.filePreview.showWord(t.fileName)):e.$notify({type:"warning",message:"该文件类型暂不支持查看"})}))},handleReject:function(){this.$router.push({name:"ChangeRejectEdit",params:{}})},requestReject:function(t){var e=this,i=this.$toast.loading({duration:0,message:"正在驳回..",forbidClick:!0}),n={comment:t,businessId:this.orderDetail.id,procInstId:this.orderDetail.procInstId,taskId:this.orderDetail.taskId};Object(c["d"])(n).then((function(t){var i=t.message;e.$notify({type:"success",message:i}),e.$router.push({name:"ChangeExamineList",params:{refresh:!0}})})).catch((function(t){e.$toast.fail("驳回失败!")})).finally((function(){i.clear()}))},handleAdopt:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),i={businessId:this.orderDetail.id,procDefId:"",procInstId:this.orderDetail.procInstId,actId:this.orderDetail.actId};Object(o["b"])(i).then((function(e){var i=e.data;i.assignee?(t.candidateUser.push(i.assignee),t.showAgreeApprovalOrderDialog()):i.assigneeList&&i.assigneeList.length>0?(t.assigneeList=t.getTreeData(i.assigneeList),t.assigneePopupShow=!0):t.showAgreeApprovalOrderDialog()})).catch((function(t){})).finally((function(){e.clear()}))},getTreeData:function(t){var e=[];return e.push({text:"",children:[]}),t.forEach((function(t){e[0].children.push({text:t.name,id:t.code})})),e},assigneeSelected:function(t){t&&(this.candidateUser=t,this.showAgreeApprovalOrderDialog()),this.assigneePopupShow=!1},showAgreeApprovalOrderDialog:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否要审批通过?"}).then((function(){t.approvalOrderApi()})).catch((function(){}))},approvalOrderApi:function(){var t=this,e=(this.$toast.loading({duration:0,message:"正在提交审批..",forbidClick:!0}),{businessId:this.orderDetail.id,procInstId:this.orderDetail.procInstId||"",taskId:this.orderDetail.taskId||"",comment:"同意",candidateUser:this.candidateUser});Object(c["b"])(e).then((function(e){var i=e.message;t.$notify({type:"success",message:i}),t.$router.push({name:"ChangeExamineList",params:{refresh:!0}})})).catch((function(e){t.$toast.fail("审批失败!")})).finally((function(){}))}}},h=p,m=(i("4618"),i("2877")),g=Object(m["a"])(h,n,a,!1,null,"6781ecaf",null);e["default"]=g.exports},2:function(t,e){},"22af":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return s})),i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return c}));var n=i("b775");function a(t){return Object(n["a"])({url:"/gcywChangeRequest/listFile",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/gcywChangeRequest/activitiLog",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/gcywChangeRequest/reject",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/gcywChangeRequest/complete",method:"post",data:t})}},3:function(t,e){},4:function(t,e){},4618:function(t,e,i){"use strict";i("8d5f")},5:function(t,e){},6:function(t,e){},"8d5f":function(t,e,i){},"986e":function(t,e,i){"use strict";var n=i("2b0e"),a=new n["d"]({});e["a"]=a},e782:function(t,e,i){"use strict";i.d(e,"h",(function(){return s})),i.d(e,"e",(function(){return r})),i.d(e,"i",(function(){return c})),i.d(e,"c",(function(){return o})),i.d(e,"f",(function(){return u})),i.d(e,"g",(function(){return l})),i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return f})),i.d(e,"d",(function(){return p}));i("99af");var n=i("b775"),a=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/api",BASE_URL:"/"}).VUE_APP_AUTH_SERVER;"".concat("/api","/").concat(a,"/minio/upload"),"".concat(a,"/minio/download");function s(t){return Object(n["a"])({url:"/vehicleRentMain/listPage",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/vehicleRentMain/add",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/vehicleRentMain/maintain/save",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/vehicleRentMain/maintain/confirm",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/vehicleRentMain/detail",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/vehicleRentMain/listActiviti",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/vehicleRentMain/complete",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/vehicleRentMain/reject",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/minio/download?fileName=".concat(t),method:"get",responseType:"blob"})}},f8b7:function(t,e,i){"use strict";i.d(e,"l",(function(){return a})),i.d(e,"m",(function(){return s})),i.d(e,"i",(function(){return r})),i.d(e,"j",(function(){return c})),i.d(e,"n",(function(){return o})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return d})),i.d(e,"k",(function(){return f})),i.d(e,"c",(function(){return p})),i.d(e,"a",(function(){return h})),i.d(e,"f",(function(){return m})),i.d(e,"h",(function(){return g})),i.d(e,"g",(function(){return v}));var n=i("b775");function a(t){return Object(n["a"])({url:"/order/getOrderDetail",method:"GET",params:t})}function s(t){return Object(n["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:t})}function r(t){return Object(n["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:t})}function c(t){return Object(n["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:t})}function o(t){return Object(n["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:t})}function u(t){return Object(n["a"])({url:"/activiti/assigneeList",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:t})}function d(t){return Object(n["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:t})}function f(t){return Object(n["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:t})}function p(t){return Object(n["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/activiti/assigneeListByType",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:t})}},fd99:function(t,e,i){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);