(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cdaf2c0"],{"0ce0":function(t,e,n){},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t=1e3,e=6e4,n=36e5,i="millisecond",s="second",a="minute",r="hour",c="day",l="week",u="month",o="quarter",f="year",d="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},_=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},g={s:_,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+_(i,2,"0")+":"+_(s,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),s=e.clone().add(i,u),a=n-s<0,r=e.clone().add(i+(a?-1:1),u);return+(-(i+(n-s)/(a?s-r:r-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:f,w:l,d:c,D:d,h:r,m:a,s:s,ms:i,Q:o}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",$={};$[b]=v;var C="$isDayjsObject",y=function(t){return t instanceof M||!(!t||!t[C])},D=function t(e,n,i){var s;if(!e)return b;if("string"==typeof e){var a=e.toLowerCase();$[a]&&(s=a),n&&($[a]=n,s=a);var r=e.split("-");if(!s&&r.length>1)return t(r[0])}else{var c=e.name;$[c]=e,s=c}return!i&&s&&(b=s),s||!i&&b},w=function(t,e){if(y(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new M(n)},S=g;S.l=D,S.i=y,S.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function v(t){this.$L=D(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[C]=!0}var _=v.prototype;return _.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(h);if(i){var s=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(e)}(t),this.init()},_.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},_.$utils=function(){return S},_.isValid=function(){return!(this.$d.toString()===p)},_.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},_.isAfter=function(t,e){return w(t)<this.startOf(e)},_.isBefore=function(t,e){return this.endOf(e)<w(t)},_.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(t,e){var n=this,i=!!S.u(e)||e,o=S.p(t),p=function(t,e){var s=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?s:s.endOf(c)},h=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},m=this.$W,v=this.$M,_=this.$D,g="set"+(this.$u?"UTC":"");switch(o){case f:return i?p(1,0):p(31,11);case u:return i?p(1,v):p(0,v+1);case l:var b=this.$locale().weekStart||0,$=(m<b?m+7:m)-b;return p(i?_-$:_+(6-$),v);case c:case d:return h(g+"Hours",0);case r:return h(g+"Minutes",1);case a:return h(g+"Seconds",2);case s:return h(g+"Milliseconds",3);default:return this.clone()}},_.endOf=function(t){return this.startOf(t,!1)},_.$set=function(t,e){var n,l=S.p(t),o="set"+(this.$u?"UTC":""),p=(n={},n[c]=o+"Date",n[d]=o+"Date",n[u]=o+"Month",n[f]=o+"FullYear",n[r]=o+"Hours",n[a]=o+"Minutes",n[s]=o+"Seconds",n[i]=o+"Milliseconds",n)[l],h=l===c?this.$D+(e-this.$W):e;if(l===u||l===f){var m=this.clone().set(d,1);m.$d[p](h),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},_.set=function(t,e){return this.clone().$set(t,e)},_.get=function(t){return this[S.p(t)]()},_.add=function(i,o){var d,p=this;i=Number(i);var h=S.p(o),m=function(t){var e=w(p);return S.w(e.date(e.date()+Math.round(t*i)),p)};if(h===u)return this.set(u,this.$M+i);if(h===f)return this.set(f,this.$y+i);if(h===c)return m(1);if(h===l)return m(7);var v=(d={},d[a]=e,d[r]=n,d[s]=t,d)[h]||1,_=this.$d.getTime()+i*v;return S.w(_,this)},_.subtract=function(t,e){return this.add(-1*t,e)},_.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var i=t||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),a=this.$H,r=this.$m,c=this.$M,l=n.weekdays,u=n.months,o=n.meridiem,f=function(t,n,s,a){return t&&(t[n]||t(e,i))||s[n].slice(0,a)},d=function(t){return S.s(a%12||12,t,"0")},h=o||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(m,(function(t,i){return i||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return S.s(e.$y,4,"0");case"M":return c+1;case"MM":return S.s(c+1,2,"0");case"MMM":return f(n.monthsShort,c,u,3);case"MMMM":return f(u,c);case"D":return e.$D;case"DD":return S.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(n.weekdaysMin,e.$W,l,2);case"ddd":return f(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(a);case"HH":return S.s(a,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return h(a,r,!0);case"A":return h(a,r,!1);case"m":return String(r);case"mm":return S.s(r,2,"0");case"s":return String(e.$s);case"ss":return S.s(e.$s,2,"0");case"SSS":return S.s(e.$ms,3,"0");case"Z":return s}return null}(t)||s.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(i,d,p){var h,m=this,v=S.p(d),_=w(i),g=(_.utcOffset()-this.utcOffset())*e,b=this-_,$=function(){return S.m(m,_)};switch(v){case f:h=$()/12;break;case u:h=$();break;case o:h=$()/3;break;case l:h=(b-g)/6048e5;break;case c:h=(b-g)/864e5;break;case r:h=b/n;break;case a:h=b/e;break;case s:h=b/t;break;default:h=b}return p?h:S.a(h)},_.daysInMonth=function(){return this.endOf(u).$D},_.$locale=function(){return $[this.$L]},_.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=D(t,e,!0);return i&&(n.$L=i),n},_.clone=function(){return S.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},v}(),x=M.prototype;return w.prototype=x,[["$ms",i],["$s",s],["$m",a],["$H",r],["$W",c],["$M",u],["$y",f],["$D",d]].forEach((function(t){x[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,M,w),t.$i=!0),w},w.locale=D,w.isDayjs=y,w.unix=function(t){return w(1e3*t)},w.en=$[b],w.Ls=$,w.p={},w}))},6:function(t,e){},"7b51":function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{class:["main-container",t.hasButton?"detail-container":""]},[e("div",{staticClass:"order-info box-container"},[e("div",[e("span",{staticClass:"title"},[t._v("申请单号：")]),e("span",{staticClass:"order-code"},[t._v(t._s(t.orderDetail.rentCode))])]),e("div",{staticClass:"order-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(t.orderDetail)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(t.orderDetail)))])])]),e("div",{staticClass:"unit-info box-container"},[e("span",{staticClass:"unit-name"},[t._v(t._s(t.orderDetail.usageUnitName))]),e("span",{staticClass:"dept-name"},[t._v(t._s(t.orderDetail.usageDeptName))])]),e("div",{staticClass:"base-info box-container"},[t._m(0),e("div",[e("ul",{staticClass:"base-ul"},[e("li",{staticClass:"li-single"},[e("img",{staticClass:"img-icon",attrs:{src:"/static/icon-base-date.png"}}),e("span",{staticClass:"title"},[t._v("起租日期：")]),e("span",{staticClass:"content"},[t._v(t._s(t.parseTime(t.orderDetail.planBeginDate,"{y}-{m}-{d}")))])]),e("li",{staticClass:"li-single"},[e("span",{staticClass:"title"},[t._v("到期日期：")]),e("span",{staticClass:"content"},[t._v(t._s(t.parseTime(t.orderDetail.planEndDate,"{y}-{m}-{d}")))])]),e("li",{staticClass:"li-single"},[e("span",{staticClass:"title"},[t._v("租赁类型：")]),e("span",{staticClass:"content"},[t._v(t._s(t.checkVehicleProperties(t.orderDetail.vehicleProperties)))])]),e("li",{staticClass:"li-single-unit"},[e("img",{staticClass:"img-icon",attrs:{src:"/static/icon-base-price.png"}}),e("span",{staticClass:"title"},[t._v("租赁总价格：")]),e("span",{staticClass:"content blue-weight"},[t._v(t._s(t.formatNumber(t.orderDetail.planRentPrice)))]),e("span",{staticClass:"unit"},[t._v("元")])])])])]),e("div",{staticClass:"car-rental-info box-container"},[t._m(1),t._l(t.orderDetail.details,(function(n,i){return e("div",{key:i,staticClass:"car-rental-item"},[e("ul",{staticClass:"detail-ul"},[e("li",[e("span",[t._v("车辆类型：")]),e("span",[t._v(t._s(n.planCarType)+" - "+t._s(n.planCarType2))])]),t.planRentPriceEdit?e("li",{staticClass:"li-single-edit-extra"},[e("van-field",{attrs:{label:"计划租赁价格：","label-width":"130px","input-align":"right",placeholder:"录入总包价",maxlength:"10"},on:{input:function(e){return t.handleNumberLimit(n,"planRentPrice",7)},blur:function(e){return t.handlePlanRentPriceBlur(i)}},model:{value:n.planRentPrice,callback:function(e){t.$set(n,"planRentPrice",e)},expression:"carItem.planRentPrice"}}),t._m(2,!0)],1):e("li",[e("span",[t._v("计划租赁价格：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.formatNumber(n.planRentPrice)))]),e("span",[t._v(" 元")])]),e("li",[e("span",[t._v("品牌：")]),e("span",[t._v(t._s(n.planCarBrand))])]),e("li",[e("span",[t._v("型号：")]),e("span",[t._v(t._s(n.planCarSeries))])]),e("li",[e("span",[t._v("座位数：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(n.planMaxMens))]),e("span",[t._v(" 座")])]),e("li",[e("span",[t._v("排气量：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(n.planCapacity))]),e("span",[t._v(" T/L")])]),e("li",[e("span",[t._v("购车价格：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.formatNumber(n.planPrice)))]),e("span",[t._v(" 元")])])])])}))],2),e("div",{staticClass:"car-rental-info box-container"},[t._m(3),e("div",[e("ul",{staticClass:"detail-ul"},[e("li",[e("span",[t._v("申请人：")]),e("span",[t._v(t._s(t.orderDetail.creator))])]),e("li",[e("span",[t._v("联系电话：")]),e("span",[t._v(t._s(t.orderDetail.createPhone))])]),e("li",{staticClass:"li-item-remark"},[e("span",[t._v("租赁描述：")]),e("div",{staticClass:"remark-detail"},[t._v(t._s(t.orderDetail.rentApplydesc||"未填写"))])])])])]),t.appendixList&&t.appendixList.length>0?e("div",{staticClass:"car-rental-info box-container"},[t._m(4),e("div",[e("ul",{staticClass:"detail-file-ul"},t._l(t.appendixList,(function(n,i){return e("li",{key:i},[e("div",{staticClass:"appendix-info"},[e("img",{attrs:{src:t.checkFileImage(n.oldFileName)}}),e("span",{on:{click:function(e){return t.seeAttachment(n)}}},[t._v(t._s(n.oldFileName))])]),e("div",{staticClass:"des-info"},[e("span",[t._v("附件说明：")]),e("span",[t._v(t._s(n.fileDesc))])])])})),0)])]):t._e(),t.orderDetail.logs&&t.orderDetail.logs.length>0?e("div",{staticClass:"car-rental-info box-container"},[t._m(5),e("div",{staticClass:"flow-info"},[e("ul",t._l(t.orderDetail.logs,(function(n,i){return e("li",{key:i},[e("div",{staticClass:"top-info"},[e("img",{attrs:{src:t.checkStatusCircle(n.operateType)}}),e("span",{staticClass:"assigneeName"},[t._v(t._s(n.realName))]),e("span",{staticClass:"status"},[t._v(t._s(t.checkStatusSuccess(n.operateType)))]),e("span",{staticClass:"endTime"},[t._v(t._s(t.parseTime(n.endTime,"{y}-{m}-{d} {h}:{i}")))])]),e("div",{staticClass:"middle-info"},[e("span",{staticClass:"actName"},[t._v("审批人")]),e("span",{staticClass:"status"},[t._v(t._s(t.checkStatusError(n.operateType)))])]),"3"==n.operateType?e("div",{staticClass:"bottom-info"},[e("span",{staticClass:"message"},[t._v("审批意见："+t._s(n.message))])]):t._e()])})),0)])]):t._e(),e("file-preview",{key:t.timer,ref:"filePreview",attrs:{fileType:t.fileType}})],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-base.png"}}),e("span",{staticClass:"info-title"},[t._v("基本信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-vehicle.png"}}),e("span",{staticClass:"info-title"},[t._v("车型信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"extra"},[e("span",[t._v("元")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-passenger.png"}}),e("span",{staticClass:"info-title"},[t._v("其他")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-file.png"}}),e("span",{staticClass:"info-title"},[t._v("附件信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-approve.png"}}),e("span",{staticClass:"info-title"},[t._v("审批流程")])])}],a=(n("4de4"),n("7db0"),n("4160"),n("baa5"),n("a9e3"),n("b680"),n("d3b7"),n("0643"),n("2382"),n("fffc"),n("4e3e"),n("159b"),n("b705")),r=n("2847"),c=n("ed08"),l=n("5a0c"),u=n.n(l),o={name:"CarRentalBaseDetail",components:{FilePreview:r["a"]},props:{orderDetail:{type:Object,default:function(){return{}}},hasButton:{type:Boolean,default:function(){return!1}},planRentPriceEdit:{type:Boolean,default:function(){return!1}}},watch:{orderDetail:{deep:!0,immediate:!0,handler:function(t,e){t.files&&(this.appendixList=t.files.filter((function(t){return"1"==t.type})))}}},data:function(){return{formatNumber:c["a"],handleNumberLimit:c["c"],vehiclePropertiesOptions:[],appendixList:[],fileType:"",timer:""}},created:function(){this.getVehiclePropertiesOptions()},methods:{getVehiclePropertiesOptions:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(a["a"])("10017").then((function(e){var n=e.data;t.vehiclePropertiesOptions=n})).catch((function(t){})).finally((function(){e.clear()}))},handlePlanRentPriceBlur:function(t){var e=u()(this.orderDetail.rentBeginDate),n=u()(this.orderDetail.rentEndDate),i=n.diff(e,"month")+1;this.orderDetail.details[t].rentPrice=this.orderDetail.details[t].planRentPrice/i,this.calculationSumPrice()},calculationSumPrice:function(){var t=0;this.orderDetail.details.forEach((function(e){t+=Number(e.planRentPrice)})),this.orderDetail.planRentPrice=t.toFixed(2)},checkVehicleProperties:function(t){var e=this.vehiclePropertiesOptions.find((function(e){return e.code==t}));return e?e.name:""},checkOrderStatus:function(t){return"0"==t.status?"待提交":"1"==t.status?"待审核":"2"==t.status?"审核中":"3"==t.status&&"0"==t.maintainStatus?"已审核":"3"==t.status&&"1"==t.maintainStatus?"已维护":"3"==t.status&&"2"==t.maintainStatus?"已确认":"4"==t.status?"已驳回":void 0},checkStatusImage:function(t){return"0"==t.status?"order-ybh":"1"==t.status?"order-dsh":"2"==t.status?"order-shz":"3"==t.status&&"0"==t.maintainStatus||"3"==t.status&&"1"==t.maintainStatus||"3"==t.status&&"2"==t.maintainStatus?"order-yhc":"4"==t.status?"order-ybh":void 0},checkFileImage:function(t){var e=t.substr(t.lastIndexOf(".")+1);return"xlsx"==e||"xls"==e?"/static/file-excel.png":"pdf"==e?"/static/file-pdf.png":"jpg"==e||"png"==e||"jpeg"==e||"bmp"==e?"/static/file-img.png":"docx"==e||"doc"==e?"/static/file-doc.png":"txt"==e?"/static/file-txt.png":"ppt"==e?"/static/file-ppt.png":"/static/file-txt.png"},seeAttachment:function(t){var e=this,n=t.fileName.substr(t.fileName.lastIndexOf(".")+1);this.timer=(new Date).getTime(),this.$nextTick((function(){if("xlsx"==n)e.fileType="excel",e.$refs.filePreview.showXlsx(t.fileName);else if("pdf"==n)e.fileType="pdf",e.$refs.filePreview.showPdf(t.fileName);else if("jpg"==n||"png"==n||"jpeg"==n||"bmp"==n){var i=e.orderDetail.files.filter((function(t){return"jpg"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"png"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"jpeg"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"bmp"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)}));e.fileType="img",e.$refs.filePreview.showImage(t,i)}else"docx"==n?(e.fileType="word",e.$refs.filePreview.showWord(t.fileName)):e.$notify({type:"warning",message:"该文件类型暂不支持查看"})}))},checkStatusCircle:function(t){return"1"==t||"2"==t?"/static/icon-flow-circle-blue.webp":"3"==t?"/static/icon-flow-circle-orange.png":"/static/icon-flow-circle-gray.png"},checkStatusSuccess:function(t){return"1"==t?"（发起人）":"2"==t?"（通过）":""},checkStatusError:function(t){return"3"==t?"不通过":""}}},f=o,d=(n("d7b7"),n("2877")),p=Object(d["a"])(f,i,s,!1,null,"360ce4ac",null);e["a"]=p.exports},d7b7:function(t,e,n){"use strict";n("0ce0")},e782:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"e",(function(){return r})),n.d(e,"i",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return p}));n("99af");var i=n("b775"),s=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/api",BASE_URL:"/"}).VUE_APP_AUTH_SERVER;"".concat("/api","/").concat(s,"/minio/upload"),"".concat(s,"/minio/download");function a(t){return Object(i["a"])({url:"/vehicleRentMain/listPage",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/vehicleRentMain/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/vehicleRentMain/maintain/save",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/vehicleRentMain/maintain/confirm",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/vehicleRentMain/detail",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/vehicleRentMain/listActiviti",method:"get",params:t})}function f(t){return Object(i["a"])({url:"/vehicleRentMain/complete",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/vehicleRentMain/reject",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/minio/download?fileName=".concat(t),method:"get",responseType:"blob"})}}}]);