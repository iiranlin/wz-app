(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bcca42e"],{1:function(t,e){},1134:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return c}));var i=a("b775");function n(t){return Object(i["a"])({url:"/vehiclePurchase/listActiviti",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/vehiclePurchase/detail",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/vehiclePurchase/complete",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/vehiclePurchase/reject",method:"post",data:t})}},"18a5":function(t,e,a){},2:function(t,e){},3:function(t,e){},"3daf":function(t,e,a){"use strict";a("18a5")},4:function(t,e){},"447e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{class:["main-container","0"==t.type?"detail-container":""]},[e("div",{staticClass:"order-info box-container"},[e("div",[e("span",{staticClass:"title"},[t._v("申请单号：")]),e("span",{staticClass:"order-code"},[t._v(t._s(t.detailInfo.purchaseNo))])]),e("div",{staticClass:"order-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(t.detailInfo.status)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(t.detailInfo.status)))])])]),e("div",{staticClass:"apply-info box-container"},[t._m(0),e("div",[e("ul",{staticClass:"detail-ul"},[e("li",[e("span",[t._v("申请单位：")]),e("span",[t._v(t._s(t.detailInfo.applyUnitName))])]),e("li",[e("span",[t._v("申请部门：")]),e("span",[t._v(t._s(t.detailInfo.applyDeptName))])]),e("li",[e("span",[t._v("申请人：")]),e("span",[t._v(t._s(t.detailInfo.applyUserName))])]),e("li",[e("span",[t._v("申请日期：")]),e("span",[t._v(t._s(t.parseTime(t.detailInfo.applyDate,"{y}-{m}-{d}")))])]),e("li",[e("span",[t._v("申请类型：")]),e("span",[t._v(t._s(t.checkApplyType(t.detailInfo.applyType)))])]),e("li",[e("span",[t._v("上牌地点：")]),e("span",[t._v(t._s(t.detailInfo.cityName))])]),e("li",{staticClass:"li-item-remark"},[e("span",[t._v("申请理由及用途：")]),e("div",{staticClass:"remark-detail"},[t._v(t._s(t.detailInfo.applyReason||"未填写"))])])])])]),t.fileList.length>0?e("div",{staticClass:"apply-info box-container"},[t._m(1),e("div",[e("ul",{staticClass:"detail-file-ul"},t._l(t.fileList,(function(a,i){return e("li",{key:i},[e("div",{staticClass:"appendix-info"},[e("img",{attrs:{src:t.checkFileImage(a.oldFileName)}}),e("span",{on:{click:function(e){return t.seeAttachment(a)}}},[t._v(t._s(a.oldFileName))])])])})),0)])]):t._e(),e("div",{staticClass:"apply-info box-container"},[t._m(2),e("div",[e("ul",{staticClass:"detail-ul"},[e("li",[e("span",[t._v("车辆类型Ⅰ：")]),e("span",[t._v(t._s(t.carInfo.carType))])]),e("li",[e("span",[t._v("车辆类型Ⅱ：")]),e("span",[t._v(t._s(t.carInfo.carType2))])]),e("li",[e("span",[t._v("排气量：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.carInfo.capacity))]),e("span",[t._v(" T/L")])]),e("li",[e("span",[t._v("品牌型号：")]),e("span",[t._v(t._s(t.carInfo.carBrand))])]),e("li",[e("span",[t._v("座位数：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.carInfo.carSeat))])]),e("li",[e("span",[t._v("购车价格：")]),e("span",{staticClass:"blue-weight detail-alert",on:{click:function(e){return t.handlePurchaseAmountClick()}}},[t._v("明细")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.formatNumber(t.carInfo.purchaseAmount)))]),e("span",[t._v(" 元")])]),e("li",[e("span",[t._v("其他费用：")]),e("span",{staticClass:"blue-weight detail-alert",on:{click:function(e){return t.handleOtherFeeClick()}}},[t._v("明细")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.formatNumber(t.carInfo.otherFee)))]),e("span",[t._v(" 元")])]),e("li",{staticClass:"li-item-remark"},[e("span",[t._v("备注：")]),e("div",{staticClass:"remark-detail"},[t._v(t._s(t.carInfo.remark||"未填写"))])])])])]),"2"==t.detailInfo.applyType?e("div",{staticClass:"apply-info box-container"},[t._m(3),e("div",[e("ul",{staticClass:"detail-ul"},[e("li",[e("span",[t._v("车牌号：")]),e("span",[t._v(t._s(t.scrapCarInfo.carNumber))])]),e("li",[e("span",[t._v("设备编号：")]),e("span",[t._v(t._s(t.scrapCarInfo.assetsNumber))])]),e("li",[e("span",[t._v("车辆类型Ⅰ：")]),e("span",[t._v(t._s(t.scrapCarInfo.carType))])]),e("li",[e("span",[t._v("车辆类型Ⅱ：")]),e("span",[t._v(t._s(t.scrapCarInfo.carType2))])]),e("li",[e("span",[t._v("购置时间：")]),e("span",[t._v(t._s(t.parseTime(t.scrapCarInfo.buyTime,"{y}-{m}-{d}")))])]),e("li",[e("span",[t._v("排气量：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.scrapCarInfo.capacity))]),e("span",[t._v(" T/L")])]),e("li",[e("span",[t._v("品牌型号：")]),e("span",[t._v(t._s(t.scrapCarInfo.carBrand))])]),e("li",[e("span",[t._v("座位数：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.scrapCarInfo.carSeat))])]),e("li",[e("span",[t._v("资产原值：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.formatNumber(t.scrapCarInfo.originalValue)))]),e("span",[t._v(" 元")])]),e("li",[e("span",[t._v("净残值：")]),e("span",{staticClass:"blue-weight"},[t._v(t._s(t.formatNumber(t.scrapCarInfo.netSalvage)))]),e("span",[t._v(" 元")])])])])]):t._e(),t.activitiList.length>0?e("div",{staticClass:"approve-info box-container"},[t._m(4),e("div",{staticClass:"flow-info"},[e("ul",t._l(t.activitiList,(function(a,i){return e("li",{key:i},[e("div",{staticClass:"top-info"},[e("img",{attrs:{src:t.checkStatusCircle(a.operateType)}}),e("span",{staticClass:"assigneeName"},[t._v(t._s(a.realName))]),e("span",{staticClass:"status"},[t._v(t._s(t.checkStatusSuccess(a.operateType)))]),e("span",{staticClass:"endTime"},[t._v(t._s(t.parseTime(a.endTime,"{y}-{m}-{d} {h}:{i}")))])]),e("div",{staticClass:"middle-info"},[e("span",{staticClass:"actName"},[t._v("审批人")]),e("span",{staticClass:"status"},[t._v(t._s(t.checkStatusError(a.operateType)))])]),"3"==a.operateType?e("div",{staticClass:"bottom-info"},[e("span",{staticClass:"message"},[t._v("审批意见："+t._s(a.message))])]):t._e()])})),0)])]):t._e(),"0"==t.type?e("div",{staticClass:"default-button-container-two"},[e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleReject()}}},[t._v("驳回")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleAdopt()}}},[t._v("通过")])],1):t._e(),e("file-preview",{key:t.timer,ref:"filePreview",attrs:{fileType:t.fileType}}),e("assignee-popup",{attrs:{assigneePopupShow:t.assigneePopupShow,assigneeList:t.assigneeList},on:{assigneeSelected:t.assigneeSelected}}),e("van-dialog",{attrs:{title:"购车价格明细"},model:{value:t.purchaseAmountShow,callback:function(e){t.purchaseAmountShow=e},expression:"purchaseAmountShow"}},[e("div",{staticClass:"detail-container"},[e("ul",[e("li",[e("span",[t._v("车辆净值：")]),e("span",[t._v(t._s(t.formatNumber(t.carInfo.originalValue))+" 元")])]),e("li",[e("span",[t._v("增值税：")]),e("span",[t._v(t._s(t.formatNumber(t.carInfo.valueAddedTax))+" 元")])])])])]),e("van-dialog",{attrs:{title:"其他价格明细"},model:{value:t.otherFeeShow,callback:function(e){t.otherFeeShow=e},expression:"otherFeeShow"}},[e("div",{staticClass:"detail-container"},[e("ul",[e("li",[e("span",[t._v("购置税：")]),e("span",[t._v(t._s(t.formatNumber(t.carInfo.purchaseTax))+" 元")])]),e("li",[e("span",[t._v("保险费：")]),e("span",[t._v(t._s(t.formatNumber(t.carInfo.insturanceAmount))+" 元")])]),e("li",[e("span",[t._v("服务费：")]),e("span",[t._v(t._s(t.formatNumber(t.carInfo.serverAmount))+" 元")])])])])])],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-base.png"}}),e("span",{staticClass:"info-title"},[t._v("基本信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-file.png"}}),e("span",{staticClass:"info-title"},[t._v("附件信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-base.png"}}),e("span",{staticClass:"info-title"},[t._v("拟购置车辆信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-base.png"}}),e("span",{staticClass:"info-title"},[t._v("拟报废车辆信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-approve.png"}}),e("span",{staticClass:"info-title"},[t._v("审批流程")])])}],s=(a("4de4"),a("7db0"),a("4160"),a("baa5"),a("14d9"),a("b64b"),a("d3b7"),a("0643"),a("2382"),a("fffc"),a("4e3e"),a("159b"),a("1134")),r=a("b705"),c=a("ed08"),o=a("f8b7"),l=a("6321"),u=a("fd99"),p=a("986e"),f=a("2847"),d={name:"PurchaseApplicationDetail",mixins:[u["a"]],components:{AssigneePopup:l["a"],FilePreview:f["a"]},data:function(){return{orderDetail:{},formatNumber:c["a"],detailInfo:{},carInfo:{},scrapCarInfo:{},fileList:[],activitiList:[],applyTypeOptions:[],type:"",assigneePopupShow:!1,assigneeList:[],candidateUser:[],adoptReason:"",fileType:"",timer:"",purchaseAmountShow:!1,otherFeeShow:!1}},created:function(){this.orderDetail=JSON.parse(this.$route.params.obj),this.type=this.$route.params.type,p["a"].$off("rejectConfirm"),p["a"].$on("rejectConfirm",function(t){this.requestReject(t)}.bind(this)),p["a"].$off("adoptConfirm"),p["a"].$on("adoptConfirm",function(t){this.requestAdopt(t)}.bind(this)),this.getPurchaseApplicationDetail(),this.getApplyTypeOptions()},methods:{getApplyTypeOptions:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["a"])("1929785249212104704").then((function(e){var a=e.data;t.applyTypeOptions=a})).catch((function(t){})).finally((function(){e.clear()}))},getPurchaseApplicationDetail:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),a={id:this.orderDetail.id};Object(s["b"])(a).then((function(e){var a=e.data;t.detailInfo=a,t.fileList=a.files,t.activitiList=a.logs,t.carInfo=a.details.find((function(t){return!t.carNumber})),t.scrapCarInfo=a.details.find((function(t){return!!t.carNumber}))})).catch((function(t){})).finally((function(){e.clear()}))},checkApplyType:function(t){var e=this.applyTypeOptions.find((function(e){return e.code==t}));return e?e.name:""},checkOrderStatus:function(t){return"1"==t?"待审核":"2"==t?"审核中":"3"==t?"已审核":"4"==t?"已驳回":void 0},checkStatusImage:function(t){return"1"==t?"order-dsh":"2"==t?"order-shz":"3"==t?"order-yhc":"4"==t?"order-ybh":void 0},checkFileImage:function(t){var e=t.substr(t.lastIndexOf(".")+1);return"xlsx"==e||"xls"==e?"/static/file-excel.png":"pdf"==e?"/static/file-pdf.png":"jpg"==e||"png"==e||"jpeg"==e||"bmp"==e?"/static/file-img.png":"docx"==e||"doc"==e?"/static/file-doc.png":"txt"==e?"/static/file-txt.png":"ppt"==e?"/static/file-ppt.png":"/static/file-txt.png"},checkStatusCircle:function(t){return"1"==t||"2"==t?"/static/icon-flow-circle-blue.webp":"3"==t?"/static/icon-flow-circle-orange.png":"/static/icon-flow-circle-gray.png"},checkStatusSuccess:function(t){return"1"==t?"（发起人）":"2"==t?"（通过）":""},checkStatusError:function(t){return"3"==t?"不通过":""},seeAttachment:function(t){var e=this,a=t.fileName.substr(t.fileName.lastIndexOf(".")+1);this.timer=(new Date).getTime(),this.$nextTick((function(){if("xlsx"==a)e.fileType="excel",e.$refs.filePreview.showXlsx(t.fileName);else if("pdf"==a)e.fileType="pdf",e.$refs.filePreview.showPdf(t.fileName);else if("jpg"==a||"png"==a||"jpeg"==a||"bmp"==a){var i=e.appendixList.filter((function(t){return"jpg"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"png"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"jpeg"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)||"bmp"==t.fileName.substr(t.fileName.lastIndexOf(".")+1)}));e.fileType="img",e.$refs.filePreview.showImage(t,i)}else"docx"==a?(e.fileType="word",e.$refs.filePreview.showWord(t.fileName)):e.$notify({type:"warning",message:"该文件类型暂不支持查看"})}))},handleReject:function(){this.$router.push({name:"PurchaseApplicationRejectEdit",params:{}})},requestReject:function(t){var e=this,a=this.$toast.loading({duration:0,message:"正在驳回..",forbidClick:!0}),i={comment:t,businessId:this.orderDetail.id,procInstId:this.orderDetail.procInstId,taskId:this.orderDetail.taskId};Object(s["d"])(i).then((function(t){var a=t.message;e.$notify({type:"success",message:a}),e.$router.push({name:"PurchaseApplicationList",params:{refresh:!0}})})).catch((function(t){e.$toast.fail("驳回失败!")})).finally((function(){a.clear()}))},handleAdopt:function(){this.$router.push({name:"PurchaseApplicationCompleteEdit",params:{}})},requestAdopt:function(t){var e=this;this.adoptReason=t;var a=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),i={businessId:this.orderDetail.id,procDefId:"",procInstId:this.orderDetail.procInstId,actId:this.orderDetail.actId};Object(o["b"])(i).then((function(t){var a=t.data;a.assignee?(e.candidateUser.push(a.assignee),e.showAgreeApprovalOrderDialog()):a.assigneeList&&a.assigneeList.length>0?(e.assigneeList=e.getTreeData(a.assigneeList),e.assigneePopupShow=!0):e.showAgreeApprovalOrderDialog()})).catch((function(t){})).finally((function(){a.clear()}))},getTreeData:function(t){var e=[];return e.push({text:"",children:[]}),t.forEach((function(t){e[0].children.push({text:t.name,id:t.code})})),e},assigneeSelected:function(t){t&&(this.candidateUser=t,this.showAgreeApprovalOrderDialog()),this.assigneePopupShow=!1},showAgreeApprovalOrderDialog:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否要审批通过?"}).then((function(){t.approvalOrderApi()})).catch((function(){}))},approvalOrderApi:function(){var t=this,e=(this.$toast.loading({duration:0,message:"正在提交审批..",forbidClick:!0}),{businessId:this.orderDetail.id,procInstId:this.orderDetail.procInstId||"",taskId:this.orderDetail.taskId||"",comment:this.adoptReason,candidateUser:this.candidateUser});Object(s["a"])(e).then((function(e){var a=e.message;t.$notify({type:"success",message:a}),t.$router.push({name:"PurchaseApplicationList",params:{refresh:!0}})})).catch((function(e){t.$toast.fail("审批失败!")})).finally((function(){}))},handlePurchaseAmountClick:function(){this.purchaseAmountShow=!0},handleOtherFeeClick:function(){this.otherFeeShow=!0}}},h=d,m=(a("3daf"),a("2877")),v=Object(m["a"])(h,i,n,!1,null,"05feb37f",null);e["default"]=v.exports},5:function(t,e){},6:function(t,e){},"986e":function(t,e,a){"use strict";var i=a("2b0e"),n=new i["d"]({});e["a"]=n},e782:function(t,e,a){"use strict";a.d(e,"h",(function(){return s})),a.d(e,"e",(function(){return r})),a.d(e,"i",(function(){return c})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return f})),a.d(e,"d",(function(){return d}));a("99af");var i=a("b775"),n=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/api",BASE_URL:"/"}).VUE_APP_AUTH_SERVER;"".concat("/api","/").concat(n,"/minio/upload"),"".concat(n,"/minio/download");function s(t){return Object(i["a"])({url:"/vehicleRentMain/listPage",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/vehicleRentMain/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/vehicleRentMain/maintain/save",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/vehicleRentMain/maintain/confirm",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/vehicleRentMain/detail",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/vehicleRentMain/listActiviti",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/vehicleRentMain/complete",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/vehicleRentMain/reject",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/minio/download?fileName=".concat(t),method:"get",responseType:"blob"})}},f8b7:function(t,e,a){"use strict";a.d(e,"l",(function(){return n})),a.d(e,"m",(function(){return s})),a.d(e,"i",(function(){return r})),a.d(e,"j",(function(){return c})),a.d(e,"n",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return p})),a.d(e,"k",(function(){return f})),a.d(e,"c",(function(){return d})),a.d(e,"a",(function(){return h})),a.d(e,"f",(function(){return m})),a.d(e,"h",(function(){return v})),a.d(e,"g",(function(){return _}));var i=a("b775");function n(t){return Object(i["a"])({url:"/order/getOrderDetail",method:"GET",params:t})}function s(t){return Object(i["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:t})}function r(t){return Object(i["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:t})}function c(t){return Object(i["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:t})}function o(t){return Object(i["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:t})}function l(t){return Object(i["a"])({url:"/activiti/assigneeList",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:t})}function p(t){return Object(i["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:t})}function f(t){return Object(i["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:t})}function d(t){return Object(i["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/activiti/assigneeListByType",method:"get",params:t})}function m(t){return Object(i["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:t})}function v(t){return Object(i["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:t})}function _(t){return Object(i["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:t})}},fd99:function(t,e,a){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);