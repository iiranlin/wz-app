(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccf6b410"],{"0c9f":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"d",(function(){return o}));var i=a("b775");function n(t){return Object(i["a"])({url:"/statistic/carStatisticByModel",method:"GET",params:t})}function r(t){return Object(i["a"])({url:"/statistic/carStatisticByOver",method:"GET",params:t})}function s(t){return Object(i["a"])({url:"/statistic/carStatisticByYear",method:"GET",params:t})}function c(t){return Object(i["a"])({url:"/statistic/useStatisticByYear",method:"GET",params:t})}function o(t){return Object(i["a"])({url:"/statistic/getListByModel",method:"GET",params:t})}},2393:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab-container"},[e("van-tabs",{attrs:{sticky:!0,color:"#0571ff"},on:{click:t.tabClick},model:{value:t.menuActiveIndex,callback:function(e){t.menuActiveIndex=e},expression:"menuActiveIndex"}},[e("van-tab",{attrs:{title:"车辆统计"}},[e("div",{staticClass:"filter-container"},[e("div",{staticClass:"unit-classify-container"},[e("div",{staticClass:"unit-container",on:{click:function(e){t.showUnitPicker=!0}}},[e("img",{attrs:{src:"/static/icon-base-unit.png"}}),e("span",[t._v(t._s(t.unitName))]),e("img",{staticClass:"arrow",attrs:{src:"/static/icon-arrow-down.png"}})]),e("div",{staticClass:"classify-container",on:{click:function(e){t.showClassifyPicker=!0}}},[e("img",{attrs:{src:"/static/icon-base-car.png"}}),e("span",[t._v(t._s(t.carTypeName))]),e("img",{staticClass:"arrow",attrs:{src:"/static/icon-arrow-down.png"}})])]),e("div",{staticClass:"car-type-container"},[e("span",{staticClass:"car-type-title"},[t._v("类型：")]),e("ul",t._l(t.vehiclePropertiesOptions,(function(a,i){return e("li",{key:i,class:{"li-checked":a.checked},on:{click:function(e){return t.handleCarTypeClick(a,i)}}},[e("span",[t._v(t._s(a.value))])])})),0)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.carTypeList.length>0,expression:"carTypeList.length > 0"}],staticClass:"vehicle-properties-container box-container"},[e("div",{staticClass:"title-info"},[e("span",[t._v("车辆占比")])]),e("ul",t._l(t.carTypeList,(function(a,i){return e("li",{key:i,on:{click:function(e){return t.handleVehicleClick(a)}}},[e("img",{attrs:{src:t.checkVehicleIcon(a.name)}}),e("div",{staticClass:"content-info"},[e("span",{staticClass:"name-count"},[t._v(t._s(a.name)+"："+t._s(a.count)+" 辆")]),e("span",{staticClass:"percentage-line",style:t.checkVehicleWithStyle(a.percentage)}),e("span",{staticClass:"percentage-value"},[t._v(t._s(a.percentage)+" %")])]),e("img",{staticClass:"arrow",attrs:{src:"/static/icon-arrow-right.png"}})])})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.overproofPercentage||t.normalPercentage,expression:"overproofPercentage || normalPercentage"}],staticClass:"overproof-container box-container"},[e("div",{staticClass:"title-info"},[e("span",[t._v("车辆分布")]),e("span",{staticClass:"sum-number"},[t._v(t._s(t.checkCarSum()))])]),e("div",{staticClass:"content-info"},[e("div",{staticClass:"overproof-content"},[e("span",[t._v("超标车辆：")]),e("span",{staticClass:"orange-weight"},[t._v(t._s(t.overproofNumber))]),e("span",[t._v(" 辆  ")]),e("span",{staticClass:"orange-weight"},[t._v(t._s(t.overproofPercentage)+" %")])]),e("div",{staticClass:"percentage-line"},["0"!=t.normalPercentage?e("div",{class:["normal-line","0"!=t.overproofPercentage?"normal-line-after":""],style:t.checkOverproofWithStyle(t.normalPercentage)}):t._e(),"0"!=t.overproofPercentage?e("div",{class:["overproof-line","0"!=t.normalPercentage?"overproof-line-after":""],style:t.checkOverproofWithStyle(t.overproofPercentage)}):t._e()]),e("div",{staticClass:"normal-content"},[e("span",[t._v("正常车辆：")]),e("span",{staticClass:"green-weight"},[t._v(t._s(t.normalNumber))]),e("span",[t._v(" 辆  ")]),e("span",{staticClass:"green-weight"},[t._v(t._s(t.normalPercentage)+" %")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.yearChartData.length>0,expression:"yearChartData.length > 0"}],staticClass:"year-container box-container"},[e("div",{staticClass:"title-info"},[e("span",[t._v("车辆年份")])]),e("div",{ref:"yearChart",staticClass:"year-content"})]),0!=t.carTypeList.length||0!=t.yearChartData.length||t.overproofPercentage||t.normalPercentage?t._e():e("div",{staticClass:"empty-container"},[e("img",{attrs:{src:"/static/order_empty_icon.png"}}),e("span",[t._v("暂无数据")])])]),e("van-tab",{attrs:{title:"运营统计"}},[e("div",{staticClass:"filter-container"},[e("div",{staticClass:"unit-classify-container"},[e("div",{staticClass:"unit-container",on:{click:function(e){t.showOperateUnitPicker=!0}}},[e("img",{attrs:{src:"/static/icon-base-unit.png"}}),e("span",[t._v(t._s(t.operateUnitName))]),e("img",{staticClass:"arrow",attrs:{src:"/static/icon-arrow-down.png"}})]),e("div",{staticClass:"classify-container",on:{click:function(e){t.showDatePicker=!0}}},[e("img",{attrs:{src:"/static/icon-base-date.png"}}),e("span",[t._v(t._s(t.operateYear))]),e("img",{staticClass:"arrow",attrs:{src:"/static/icon-arrow-down.png"}})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.operateCharData.length>0,expression:"operateCharData.length > 0"}],staticClass:"operate-container box-container"},[e("div",{ref:"operateChart",staticClass:"operate-content"})]),0==t.operateCharData.length?e("div",{staticClass:"empty-container"},[e("img",{attrs:{src:"/static/order_empty_icon.png"}}),e("span",[t._v("暂无数据")])]):t._e()])],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showUnitPicker,callback:function(e){t.showUnitPicker=e},expression:"showUnitPicker"}},[e("van-picker",{attrs:{"value-key":"unitName","show-toolbar":"",columns:t.unitOptions},on:{cancel:function(e){t.showUnitPicker=!1},confirm:t.onUnitConfirm}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showClassifyPicker,callback:function(e){t.showClassifyPicker=e},expression:"showClassifyPicker"}},[e("van-picker",{ref:"classifyPicker",attrs:{"value-key":"value","show-toolbar":"",columns:t.carTypeOptions},on:{cancel:function(e){t.showClassifyPicker=!1},confirm:t.onClassifyConfirm}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showOperateUnitPicker,callback:function(e){t.showOperateUnitPicker=e},expression:"showOperateUnitPicker"}},[e("van-picker",{attrs:{"value-key":"unitName","show-toolbar":"",columns:t.unitOptions},on:{cancel:function(e){t.showOperateUnitPicker=!1},confirm:t.onOperateUnitConfirm}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showDatePicker,callback:function(e){t.showDatePicker=e},expression:"showDatePicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.yearOptions},on:{cancel:function(e){t.showDatePicker=!1},confirm:t.onDateConfirm}})],1)],1)},n=[],r=(a("7db0"),a("4160"),a("14d9"),a("3c65"),a("f4b3"),a("e9c4"),a("a9e3"),a("d3b7"),a("0643"),a("fffc"),a("4e3e"),a("159b"),a("f527")),s=a("0c9f"),c=a("fd99"),o={name:"StatisticalCar",mixins:[c["a"]],data:function(){return{menuActiveIndex:0,showUnitPicker:!1,showClassifyPicker:!1,showOperateUnitPicker:!1,showDatePicker:!1,unitCode:"",unitName:"全部单位",carType:"",carTypeName:"全部车型",vehicleProperties:"",operateYear:(new Date).getFullYear(),operateUnitName:"全部单位",operateUnitCode:"",overproofNumber:0,overproofPercentage:"",normalNumber:0,normalPercentage:"",carTypeList:[],yearChartData:[],yearXAxisData:[],operateCharData:[],operateXAxisData:[],unitOptions:[],yearOptions:[],vehiclePropertiesOptions:[{code:"",value:"全部",checked:!0},{code:"1",value:"自有",checked:!1},{code:"2",value:"租赁",checked:!1}],carTypeOptions:[{code:"",value:"全部车型"},{code:"轿车",value:"轿车"},{code:"商务车",value:"商务车"},{code:"货车及皮卡",value:"货车及皮卡"},{code:"大客车",value:"大客车"},{code:"越野车",value:"越野车"},{code:"专业用车",value:"专业用车"}]}},created:function(){this.getUnitOptions(),this.getYearRange(),this.initView()},methods:{getYearRange:function(){for(var t=(new Date).getFullYear(),e=0;e<7;e++)this.yearOptions.push(Number(t)-e)},initView:function(){this.yearXAxisData=[],this.yearChartData=[],this.overproofNumber=0,this.overproofPercentage=0,this.normalNumber=0,this.normalPercentage=0,this.getCarStatisticByModel(),this.getCarStatisticByOver(),this.getCarStatisticByYear()},getUnitOptions:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["i"])().then((function(e){var a=e.data,i={unitName:"全部单位",id:""};a.unshift(i),t.unitOptions=a})).catch((function(t){})).finally((function(){e.clear()}))},getCarStatisticByModel:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),a={vehicleProperties:this.vehicleProperties,unitCode:this.unitCode,carType:this.carType};Object(s["a"])(a).then((function(e){var a=e.data;t.carTypeList=a.list,0!==t.carTypeList.length&&t.initSortcarTypeList()})).catch((function(t){})).finally((function(){e.clear()}))},getCarStatisticByOver:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),a={vehicleProperties:this.vehicleProperties,unitCode:this.unitCode,carType:this.carType};Object(s["b"])(a).then((function(e){var a=e.data;a.forEach((function(e){"超标车辆"==e.name?(t.overproofNumber=e.count,t.overproofPercentage=e.percentage):"正常车辆"==e.name&&(t.normalNumber=e.count,t.normalPercentage=e.percentage)}))})).catch((function(t){})).finally((function(){e.clear()}))},getCarStatisticByYear:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),a={vehicleProperties:this.vehicleProperties,unitCode:this.unitCode,carType:this.carType};Object(s["c"])(a).then((function(e){var a=e.data;a&&(a.forEach((function(e,a){t.yearXAxisData.push(e.name),t.yearChartData.push(e.count)})),t.$nextTick((function(){t.initBarCharts()})))})).catch((function(t){})).finally((function(){e.clear()}))},getUseStatisticByYear:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),a={year:this.operateYear,selectedUnitId:this.operateUnitCode};Object(s["e"])(a).then((function(e){var a=e.data;a&&(a.forEach((function(e,a){t.operateXAxisData.push(e.count),t.operateCharData.push(e.name)})),t.$nextTick((function(){t.initOperateBarCharts()})))})).catch((function(t){})).finally((function(){e.clear()}))},initBarCharts:function(){var t=this.$echarts.init(this.$refs.yearChart);t.setOption({xAxis:{data:this.yearXAxisData,axisLabel:{show:!0,textStyle:{color:"#2e2e2e",fontSize:"10"}}},yAxis:{},series:[{type:"bar",data:this.yearChartData,itemStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:.95,colorStops:[{offset:0,color:"#53b6ff"},{offset:1,color:"#346fdd"}]},borderRadius:[2,2,2,2]}}}]})},initOperateBarCharts:function(){var t=this.$echarts.init(this.$refs.operateChart);t.setOption({color:["#5087ec"],xAxis:{type:"value",minInterval:5,axisLine:{show:!0},axisTick:{show:!0}},yAxis:{type:"category",data:this.operateCharData},series:[{type:"bar",data:this.operateXAxisData,label:{show:!0,position:"right",formatter:"{c}次"}}]})},initSortcarTypeList:function(){var t=[],e=this.carTypeList.find((function(t){return"轿车"===t.name}));e&&t.push(e);var a=this.carTypeList.find((function(t){return"商务车"===t.name}));a&&t.push(a);var i=this.carTypeList.find((function(t){return"越野车"===t.name}));i&&t.push(i);var n=this.carTypeList.find((function(t){return"大客车"===t.name}));n&&t.push(n);var r=this.carTypeList.find((function(t){return"货车及皮卡"===t.name}));r&&t.push(r);var s=this.carTypeList.find((function(t){return"专业用车"===t.name}));s&&t.push(s),this.carTypeList=t},checkVehicleIcon:function(t){return"轿车"==t?"/static/icon-jiaoche.png":"商务车"==t?"/static/icon-shangwuche.png":"越野车"==t?"/static/icon-yueyeche.png":"大客车"==t?"/static/icon-dakeche.png":"货车及皮卡"==t?"/static/icon-huoche.png":"专业用车"==t?"/static/icon-zhuanyeyongche.png":void 0},checkVehicleWithStyle:function(t){var e=0;return e=190*t/100,"width:"+Math.round(e)+"px;"},checkOverproofWithStyle:function(t){var e=0;return e="calc("+t+"% - 10px)","width:"+e},tabClick:function(t,e){"1"==t&&0==this.operateCharData.length&&this.initOperateView()},handleCarTypeClick:function(t,e){this.vehiclePropertiesOptions.forEach((function(t,a){t.checked=e==a})),this.vehicleProperties=t.code,this.initView()},onUnitConfirm:function(t){this.showUnitPicker=!1,this.unitCode=t.unitCode,this.unitName=t.unitName,this.initView()},onClassifyConfirm:function(t){this.showClassifyPicker=!1,this.carType=t.code,this.carTypeName=t.value,this.initView()},handleVehicleClick:function(t){this.$router.push({name:"StatisticalCarList",params:{obj:JSON.stringify(t),vehicleProperties:this.vehicleProperties,unitCode:this.unitCode}})},onOperateUnitConfirm:function(t){this.showOperateUnitPicker=!1,this.operateUnitCode=t.id,this.operateUnitName=t.unitName,this.initOperateView()},onDateConfirm:function(t){this.showDatePicker=!1,this.operateYear=t,this.initOperateView()},checkCarSum:function(){return"（车辆总数 "+(Number(this.normalNumber)+Number(this.overproofNumber))+"）"},initOperateView:function(){this.operateXAxisData=[],this.operateCharData=[],this.getUseStatisticByYear()}}},u=o,l=(a("9ba4"),a("2877")),h=Object(l["a"])(u,i,n,!1,null,"ee3ab2da",null);e["default"]=h.exports},"34df":function(t,e,a){},"3c65":function(t,e,a){"use strict";var i=a("23e7"),n=a("7b0b"),r=a("07fa"),s=a("3a34"),c=a("083a"),o=a("3511"),u=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},h=u||!l();i({target:"Array",proto:!0,arity:1,forced:h},{unshift:function(t){var e=n(this),a=r(e),i=arguments.length;if(i){o(a+i);var u=a;while(u--){var l=u+i;u in e?e[l]=e[u]:c(e,l)}for(var h=0;h<i;h++)e[h]=arguments[h]}return s(e,a+i)}})},"9ba4":function(t,e,a){"use strict";a("34df")},f527:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"n",(function(){return o})),a.d(e,"g",(function(){return u})),a.d(e,"j",(function(){return l})),a.d(e,"p",(function(){return h})),a.d(e,"f",(function(){return p})),a.d(e,"r",(function(){return f})),a.d(e,"l",(function(){return d})),a.d(e,"h",(function(){return v})),a.d(e,"e",(function(){return m})),a.d(e,"o",(function(){return g})),a.d(e,"m",(function(){return y})),a.d(e,"b",(function(){return C})),a.d(e,"q",(function(){return b})),a.d(e,"i",(function(){return w})),a.d(e,"k",(function(){return k}));var i=a("b775"),n="",r=n+"/dispatch/carPic";function s(t){return Object(i["a"])({url:"/dispatch/dispatchList",method:"GET",params:t})}function c(t){return Object(i["a"])({url:"/dispatch/dispatchedList",method:"GET",params:t})}function o(t){return Object(i["a"])({url:"/dispatch/historyList",method:"GET",params:t})}function u(t){return Object(i["a"])({url:"/dispatch/getAvailableCar",method:"GET",params:t})}function l(t){return Object(i["a"])({url:"/vehicleInfo/getAssignCount",method:"GET",params:t})}function h(t){return Object(i["a"])({url:"/dispatch/saveOrderDispatch",method:"POST",data:t})}function p(t){return Object(i["a"])({url:"/dispatch/reassignment",method:"POST",data:t})}function f(t,e){return Object(i["a"])({url:"/vehicleInfo/".concat(e?"getResAvailableCar":"getAvailableCar"),method:"get",params:t})}function d(t){return Object(i["a"])({url:"/gcjcDriverClass/getRGAvailableDriver",method:"get",params:t})}function v(t){return Object(i["a"])({url:"/gcjcDriverClass/getAvailableDriver",method:"get",params:t})}function m(t){return Object(i["a"])({url:"/gcywVehicleRequest/saveOrderDispatch",method:"POST",data:t})}function g(t){return Object(i["a"])({url:"/gcywVehicleRequest/reassignment",method:"POST",data:t})}function y(t){return Object(i["a"])({url:"/gcjcTurnUnit/listAll",method:"GET",params:t})}function C(t){return Object(i["a"])({url:"/gcywVehicleRequest/redispatch",method:"POST",data:t})}function b(t){return Object(i["a"])({url:"/gcywVehicleRequest/updateRessUnit",method:"post",data:t})}function w(t){return Object(i["a"])({url:"/system/unit/getAvailableUnit",method:"GET",params:t})}function k(t){return Object(i["a"])({url:"/dept/tree",method:"GET",params:t})}},fd99:function(t,e,a){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);