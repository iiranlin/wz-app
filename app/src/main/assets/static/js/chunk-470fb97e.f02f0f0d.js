(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-470fb97e"],{"26c3":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return n})),i.d(e,"b",(function(){return r})),i.d(e,"e",(function(){return o})),i.d(e,"i",(function(){return c})),i.d(e,"g",(function(){return u})),i.d(e,"f",(function(){return d})),i.d(e,"h",(function(){return h})),i.d(e,"j",(function(){return l})),i.d(e,"a",(function(){return f})),i.d(e,"k",(function(){return g}));var s=i("b775");function a(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/listPage",method:"GET",params:t})}function n(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/listPage",method:"GET",params:t})}function r(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/driving/checkDriving",method:"GET",params:t})}function o(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/cancelOrder",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/takeOrder",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/remind",method:"get",params:t})}function d(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/driving",method:"post",data:t})}function h(t){return Object(s["a"])({url:"/gcywVehicleReqAssignmennt/returning",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/minio/upload",method:"post",data:t})}function f(t){return Object(s["a"])({url:"/vehicleInfo/isRestriction",method:"get",params:t})}function g(t){return Object(s["a"])({url:"/vehicleInfo/detail/".concat(t),method:"get"})}},a046:function(t,e,i){"use strict";i("cc8b")},a29b:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"main-container"},[e("van-tabs",{attrs:{sticky:!0,type:"card",color:"#0571ff","title-active-color":"#ffffff","title-inactive-color":"#2e2e2e"},model:{value:t.menuActiveIndex,callback:function(e){t.menuActiveIndex=e},expression:"menuActiveIndex"}},[e("van-tab",{attrs:{title:"待处理"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.waitRefresh},model:{value:t.waitRefreshLoading,callback:function(e){t.waitRefreshLoading=e},expression:"waitRefreshLoading"}},[e("van-list",{attrs:{finished:t.waitFinished,"finished-text":"没有更多了..."},on:{load:t.getWaitOrderList},model:{value:t.waitLoading,callback:function(e){t.waitLoading=e},expression:"waitLoading"}},t._l(t.waitOrderList,(function(i,s){return e("div",{key:s,staticClass:"order-info-item box-container",on:{click:function(e){return t.handleWaitItemClick(i)}}},[e("ul",{staticClass:"list-ul"},[1==i.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[t._v("长途单")])]):t._e(),e("li",[e("span",[t._v("出发时间：")]),e("span",[t._v(t._s(i.startDate))])]),e("li",[e("span",[t._v("出"+t._s(" ")+t._s(" ")+"发"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(i.fromAddr))])]),e("li",[e("span",[t._v("目"+t._s(" ")+t._s(" ")+"的"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(i.toAddr))])]),e("li",[e("span",[t._v("分派司机：")]),e("span",[t._v(t._s(i.driver))])]),e("li",[e("span",[t._v("分派车辆：")]),e("span",[t._v(t._s(i.carBrand)+t._s(" ")+t._s(i.carSeries))])]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(i.status)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(i.status)))])]),e("img",{attrs:{src:t.checkCarImagePath(i.carBrand,i.carSeries)}})])])})),0)],1)],1),e("van-tab",{attrs:{title:"历史订单"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.historyRefresh},model:{value:t.historyRefreshLoading,callback:function(e){t.historyRefreshLoading=e},expression:"historyRefreshLoading"}},[e("van-list",{attrs:{finished:t.historyFinished,"finished-text":"没有更多了..."},on:{load:t.getHistoryOrderList},model:{value:t.historyLoading,callback:function(e){t.historyLoading=e},expression:"historyLoading"}},t._l(t.historyOrderList,(function(i,s){return e("div",{key:s,staticClass:"order-info-item box-container",on:{click:function(e){return t.handleHistoryItemClick(i)}}},[e("ul",{staticClass:"list-ul"},[1===i.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[t._v("长途单")])]):t._e(),e("li",[e("span",[t._v("出发时间：")]),e("span",[t._v(t._s(i.startDate))])]),e("li",[e("span",[t._v("出"+t._s(" ")+t._s(" ")+"发"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(i.fromAddr))])]),e("li",[e("span",[t._v("目"+t._s(" ")+t._s(" ")+"的"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(i.toAddr))])]),e("li",[e("span",[t._v("分派司机：")]),e("span",[t._v(t._s(i.driver))])]),e("li",[e("span",[t._v("分派车辆：")]),e("span",[t._v(t._s(i.carBrand)+t._s(" ")+t._s(i.carSeries))])]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(i.status)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(i.status)))])]),e("img",{attrs:{src:t.checkCarImagePath(i.carBrand,i.carSeries)}})])])})),0)],1)],1)],1)],1)},a=[],n=i("2909"),r=(i("99af"),i("14d9"),i("d3b7"),i("26c3")),o=i("0b8e"),c=i("fd99"),u={name:"DrivingList",mixins:[c["a"]],beforeRouteEnter:function(t,e,i){i((function(e){var i=setTimeout((function(){e.$refs.container.scrollTop=t.meta.scrollTop,clearTimeout(i)}),0)}))},beforeRouteLeave:function(t,e,i){if("DrivingDetails"===t.name){var s=this.$refs.container,a=s.scrollTop;e.meta.scrollTop=a}i()},data:function(){return{menuActiveIndex:0,waitOrderList:[],waitRefreshLoading:!1,waitLoading:!1,waitFinished:!1,waitListQuery:{pageNum:1,pageSize:10,orderByColumn:"usageDate",isAsc:"asc",statusList:"1,2,4"},historyOrderList:[],historyRefreshLoading:!1,historyLoading:!1,historyFinished:!1,historyListQuery:{pageNum:1,pageSize:10,orderByColumn:"usageDate",isAsc:"desc",statusList:"3,5,7"},checkCarImagePath:o["a"]}},created:function(){},activated:function(){this.$route.params.refresh&&(this.waitRefresh(),this.historyRefresh()),this.$store.commit("removeThisPage","DrivingDetails")},methods:{getWaitOrderList:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["c"])(this.waitListQuery).then((function(e){var i=e.data;t.waitRefreshLoading&&(t.waitOrderList=[],t.waitRefreshLoading=!1),t.waitLoading=!1,t.waitOrderList=[].concat(Object(n["a"])(t.waitOrderList),Object(n["a"])(i.list)),i.hasNextPage?t.waitListQuery.pageNum=t.waitListQuery.pageNum+1:t.waitFinished=!0})).catch((function(e){t.waitLoading=!1,t.waitFinished=!0})).finally((function(){e.clear()}))},getHistoryOrderList:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["d"])(this.historyListQuery).then((function(e){var i=e.data;t.historyRefreshLoading&&(t.historyOrderList=[],t.historyRefreshLoading=!1),t.historyLoading=!1,t.historyOrderList=[].concat(Object(n["a"])(t.historyOrderList),Object(n["a"])(i.list)),i.hasNextPage?t.historyListQuery.pageNum=t.historyListQuery.pageNum+1:t.historyFinished=!0})).catch((function(e){t.historyLoading=!1,t.historyFinished=!0})).finally((function(){e.clear()}))},checkOrderStatus:function(t){var e="";switch(t){case"1":e="待接单";break;case"2":e="待出车";break;case"3":e="拒绝接单";break;case"4":e="已出车";break;case"5":e="已还车";break;case"6":e="转派";break;case"7":e="已确认";break;case"8":e="拒绝再派单";break;default:break}return e},checkStatusImage:function(t){return"1"===t||"2"===t?"order-dsh":"3"===t?"order-ybh":"4"===t?"order-ycc":"5"===t?"order-yhc":"6"===t?"order-ybh":"7"===t?"order-yqr":"8"===t?"order-ybh":void 0},handleWaitItemClick:function(t){this.$router.push({name:"DrivingDetails",params:{id:t.id,assignmentId:t.assignmentId}})},handleHistoryItemClick:function(t){this.$router.push({name:"DrivingDetails",params:{id:t.id,assignmentId:t.assignmentId}})},waitRefresh:function(){this.waitRefreshLoading=!0,this.waitLoading=!0,this.waitFinished=!1,this.waitListQuery.pageNum=1,this.getWaitOrderList()},historyRefresh:function(){this.historyRefreshLoading=!0,this.historyLoading=!0,this.historyFinished=!1,this.historyListQuery.pageNum=1,this.getHistoryOrderList()}}},d=u,h=(i("a046"),i("2877")),l=Object(h["a"])(d,s,a,!1,null,"3e77e29c",null);e["default"]=l.exports},cc8b:function(t,e,i){},fd99:function(t,e,i){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);