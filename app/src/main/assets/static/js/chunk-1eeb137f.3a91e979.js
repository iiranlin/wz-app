(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eeb137f"],{"5b81":function(t,e,r){"use strict";var n=r("23e7"),a=r("c65b"),i=r("e330"),o=r("1d80"),s=r("1626"),c=r("7234"),u=r("44e7"),l=r("577e"),d=r("dc4a"),f=r("90d8"),h=r("0cb2"),p=r("b622"),g=r("c430"),m=p("replace"),b=TypeError,v=i("".indexOf),O=i("".replace),y=i("".slice),D=Math.max;n({target:"String",proto:!0},{replaceAll:function(t,e){var r,n,i,p,w,C,j,$,k,q,L=o(this),R=0,V="";if(!c(t)){if(r=u(t),r&&(n=l(o(f(t))),!~v(n,"g")))throw new b("`.replaceAll` does not allow non-global regexes");if(i=d(t,m),i)return a(i,t,L,e);if(g&&r)return O(l(L),t,e)}p=l(L),w=l(t),C=s(e),C||(e=l(e)),j=w.length,$=D(1,j),k=v(p,w);while(-1!==k)q=C?l(e(w,k,p)):h(w,p,k,[],void 0,e),V+=y(p,R,k)+q,R=k+j,k=k+$>p.length?-1:v(p,w,k+$);return R<p.length&&(V+=y(p,R)),V}})},"986e":function(t,e,r){"use strict";var n=r("2b0e"),a=new n["d"]({});e["a"]=a},a517:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("general-order-detail",{attrs:{orderDetail:t.orderDetail,approveLogList:t.approveLogList,hasButton:"2"==t.orderDetail.status||"3"==t.orderDetail.status||"4"==t.orderDetail.status||"5"==t.orderDetail.status||"6"==t.orderDetail.status||"7"==t.orderDetail.status||"8"==t.orderDetail.status||"9"==t.orderDetail.status||"10"==t.orderDetail.status||"11"==t.orderDetail.status}}),"2"==t.orderDetail.status||"4"==t.orderDetail.status?e("div",{staticClass:"default-button-container-two"},[e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleCancel()}}},[t._v("取消订单")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleCopy()}}},[t._v("复制订单")])],1):t._e(),"3"==t.orderDetail.status||"5"==t.orderDetail.status||"6"==t.orderDetail.status||"7"==t.orderDetail.status||"8"==t.orderDetail.status||"9"==t.orderDetail.status||"11"==t.orderDetail.status?e("div",{staticClass:"default-button-container-one"},[e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleCopy()}}},[t._v("复制订单")])],1):t._e(),"10"==t.orderDetail.status?e("div",{staticClass:"default-button-container-two"},[e("van-button",{attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.handleCopy()}}},[t._v("复制订单")]),e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleConfirm()}}},[t._v("确认用车")])],1):t._e()],1)},a=[],i=(r("14d9"),r("d3b7"),r("8a60")),o=r("f8b7"),s=r("986e"),c=r("fd99"),u={name:"OrderDetail",mixins:[c["a"]],components:{GeneralOrderDetail:i["a"]},data:function(){return{id:"",orderDetail:{},approveLogList:[]}},created:function(){this.id=this.$route.params.id,this.getOrderDetail(),this.getOrderApprovalLog(),s["a"].$off("cancelOrderConfirm"),s["a"].$on("cancelOrderConfirm",function(t){this.requestCancelOrder(t)}.bind(this))},activated:function(){this.$route.params.refresh&&(this.getOrderDetail(),this.getOrderApprovalLog())},methods:{getOrderDetail:function(){var t=this,e=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0}),r={id:this.id};Object(o["m"])(r).then((function(e){var r=e.data;t.orderDetail=r.list[0]})).catch((function(){})).finally((function(){e.clear()}))},getOrderApprovalLog:function(){var t=this,e=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0}),r={reqId:this.id};Object(o["i"])(r).then((function(e){var r=e.data;t.approveLogList=r})).catch((function(){})).finally((function(){e.clear()}))},handleCancel:function(){this.$router.push({name:"CancelOrderEdit",params:{}})},handleCopy:function(){this.$router.push({name:"StartApplying",params:{id:this.orderDetail.id}})},handleConfirm:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否确认用车?"}).then((function(){t.requestConfirm()})).catch((function(){}))},requestConfirm:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在取消..",forbidClick:!0}),r=[],n={id:this.id};r.push(n),Object(o["k"])(r).then((function(e){var r=e.message;t.$notify({type:"success",message:r}),t.$store.dispatch("CarApplication/triggerFefresh",!0),t.$router.push({name:"OutstandOrder",params:{}})})).catch((function(e){t.$toast.fail("取消失败!")})).finally((function(){e.clear()}))},requestCancelOrder:function(t){var e=this,r=this.$toast.loading({duration:0,message:"正在取消..",forbidClick:!0}),n=[],a={id:this.id,closeReason:t};n.push(a),Object(o["j"])(n).then((function(t){var r=t.message;e.$notify({type:"success",message:r}),e.$store.dispatch("CarApplication/triggerFefresh",!0),e.$router.push({name:"OutstandOrder",params:{}})})).catch((function(t){e.$toast.fail("取消失败!")})).finally((function(){r.clear()}))}}},l=u,d=r("2877"),f=Object(d["a"])(l,n,a,!1,null,"4a7affc4",null);e["default"]=f.exports},f8b7:function(t,e,r){"use strict";r.d(e,"l",(function(){return a})),r.d(e,"m",(function(){return i})),r.d(e,"i",(function(){return o})),r.d(e,"j",(function(){return s})),r.d(e,"n",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return d})),r.d(e,"k",(function(){return f})),r.d(e,"c",(function(){return h})),r.d(e,"a",(function(){return p})),r.d(e,"f",(function(){return g})),r.d(e,"h",(function(){return m})),r.d(e,"g",(function(){return b}));var n=r("b775");function a(t){return Object(n["a"])({url:"/order/getOrderDetail",method:"GET",params:t})}function i(t){return Object(n["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:t})}function o(t){return Object(n["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:t})}function s(t){return Object(n["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:t})}function c(t){return Object(n["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:t})}function u(t){return Object(n["a"])({url:"/activiti/assigneeList",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:t})}function d(t){return Object(n["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:t})}function f(t){return Object(n["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:t})}function h(t){return Object(n["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/activiti/assigneeListByType",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:t})}},fd99:function(t,e,r){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);