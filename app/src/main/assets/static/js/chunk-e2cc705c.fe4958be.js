(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2cc705c"],{2652:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("van-form",{staticStyle:{padding:"0"},attrs:{"show-error":!0,"show-error-message":!1},on:{submit:e.onSubmit}},[t("van-field",{attrs:{label:"别名：",placeholder:"请输入别名",maxlength:"20","label-align":"right",rules:[{required:!0,message:"请填写别名"}]},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("van-field",{attrs:{label:"详细地址：",type:"textarea",placeholder:"请输入详细地址",maxlength:"50","label-align":"right",rules:[{required:!0,message:"请填写详细地址"}]},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),t("van-field",{attrs:{label:"省市区：","label-align":"right",placeholder:"请选择省市区",rules:[{required:!0,message:"请选择省市区"}]},on:{click:function(t){e.showPop=!0}},scopedSlots:e._u([{key:"input",fn:function(){},proxy:!0}]),model:{value:e.form.areaLongName,callback:function(t){e.$set(e.form,"areaLongName",t)},expression:"form.areaLongName"}}),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showPop,callback:function(t){e.showPop=t},expression:"showPop"}},[t("van-cascader",{attrs:{title:"请选择所在地区",options:e.provinceOptions,"field-names":e.fieldNames},on:{close:function(t){e.showPop=!1},change:e.onChange,finish:e.onFinish},model:{value:e.cascaderValue,callback:function(t){e.cascaderValue=t},expression:"cascaderValue"}})],1),t("van-field",{attrs:{label:"是否默认：","label-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-switch",{attrs:{size:"20"},on:{change:function(t){return e.handleDefaultTagChage()}},model:{value:e.isDefualtTag,callback:function(t){e.isDefualtTag=t},expression:"isDefualtTag"}})]},proxy:!0}])}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("保存")]),t("van-button",{staticStyle:{"margin-top":"20px"},attrs:{round:"",block:"",type:"info","native-type":"button"},on:{click:function(t){return e.handleDeleteClick()}}},[e._v("删除")])],1)],1)],1)},i=[],r=n("c7eb"),o=n("1da1"),s=(n("7db0"),n("4160"),n("a15b"),n("d81d"),n("d3b7"),n("0643"),n("fffc"),n("4e3e"),n("a573"),n("159b"),n("7d31")),c={data:function(){return{provinceOptions:[],cityOptions:[],areaOptions:[],isDefualtTag:!1,showPop:!1,fieldNames:{text:"divisionName",value:"divisionId",children:"children"},cascaderValue:"",form:{id:"",deleteTag:"0",name:"",address:"",defualtTag:"0",provinceId:"",cityId:"",areaId:"",addressType:"",areaLongName:""}}},mounted:function(){this.form=Object.assign({},this.$route.params.addressInfo),this.isDefualtTag="0"!==this.form.defualtTag,this.cascaderValue=this.form.areaId,this.getProvinceOptions(0),this.getCityOptions(this.form.provinceId),this.getAreaOptions(this.form.cityId)},methods:{getProvinceOptions:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["c"])({pid:e}).then((function(e){var n=e.data;t.provinceOptions=n.list})).catch((function(e){}));case 2:case"end":return n.stop()}}),n)})))()},getCityOptions:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["c"])({pid:e}).then((function(e){var n=e.data;t.cityOptions=n.list,t.provinceOptions.forEach((function(e){e.divisionId===t.form.provinceId&&t.$set(e,"children",t.cityOptions)}))})).catch((function(e){}));case 2:case"end":return n.stop()}}),n)})))()},getAreaOptions:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["c"])({pid:e}).then((function(e){var n=e.data;t.areaOptions=n.list;var a=t.provinceOptions.find((function(e){return e.divisionId===t.form.provinceId}));a.children.forEach((function(e){e.divisionId===t.form.cityId&&t.$set(e,"children",t.areaOptions)}))})).catch((function(e){}));case 2:case"end":return n.stop()}}),n)})))()},handleDefaultTagChage:function(){this.form.defualtTag=this.isDefualtTag?"1":"0"},onSubmit:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form.deleteTag="0",e.next=3,Object(s["a"])(Object.assign({},t.form)).then((function(e){var n=e.message;t.$notify({type:"success",message:n}),t.$router.back()})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})))()},handleDeleteClick:function(){var e=this;this.$dialog.confirm({title:"提示",message:"是否要删除该常用地址?"}).then((function(){e.deleteCommonAddress()})).catch((function(e){}))},deleteCommonAddress:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.deleteTag="1",t.next=3,Object(s["a"])(Object.assign({},e.form)).then((function(t){var n=t.message;e.$notify({type:"success",message:n}),e.$router.back()})).catch((function(e){}));case 3:case"end":return t.stop()}}),t)})))()},onChange:function(e){var t=e.value,n=(e.selectedOptions,e.tabIndex);0===n?(this.getCityOptions(t),this.form.provinceId=t):1===n?(this.getAreaOptions(t),this.form.cityId=t):2===n&&(this.form.areaId=t)},onFinish:function(e){e.value;var t=e.selectedOptions,n=e.tabIndex;2===n&&(this.showPop=!1,this.form.areaLongName=t.map((function(e){return e.divisionName})).join("/"))}}},u=c,d=(n("dd82"),n("2877")),l=Object(d["a"])(u,a,i,!1,null,null,null);t["default"]=l.exports},"7d31":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));var a=n("b775");function i(e){return Object(a["a"])({url:"/gcjcCommonAddress/listAll",method:"GET",params:e})}function r(e){return Object(a["a"])({url:"/gcjcCommonAddress/saveorupdate",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/gcjcDivision/list",method:"get",params:e})}},d0c7:function(e,t,n){},dd82:function(e,t,n){"use strict";n("d0c7")}}]);