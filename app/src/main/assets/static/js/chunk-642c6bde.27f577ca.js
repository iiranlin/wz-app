(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-642c6bde"],{3028:function(t,e,i){},c243:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%",height:"100%"}},[e("iframe",{ref:"arcgis",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.url}}),e("div",{staticClass:"route_info"},[e("i",{staticClass:"icon_warning"}),e("span",[t._v(t._s(t.carInfo.carNumber)+" ")]),e("span",[t._v(t._s(t.startTime)+"-")]),e("span",[t._v(" "+t._s(t.endTime)+" ")]),e("span",[t._v(t._s(t.miles)+"KM")]),t.simNumber?e("a",{staticClass:"replay",attrs:{href:"#"},on:{click:t.handleReplayClick}},[e("i",{staticClass:"icon_paly"}),t._v("回放 ")]):t._e()])])},n=[],a=i("c7eb"),s=i("1da1"),c=(i("a9e3"),i("b775"));function o(t){return Object(c["a"])({url:"/logistics/trajectoryAll",method:"get",params:t})}function u(t){return Object(c["a"])({url:"/logistics/getDrivingRecord",method:"get",params:t})}var l=i("ed08"),m={name:"ArcgisMap",data:function(){return{url:"",carInfo:{},replayList:[],miles:"",simNumber:"",startTime:"",endTime:""}},mounted:function(){this.url="/static/arcgisMap.html",this.carInfo=Object.assign(this.carInfo,this.$route.params.carInfo),this.miles=Number(this.carInfo.endMiles)-Number(this.carInfo.beginMiles),this.getLogisticsGetDrivingRecord(this.carInfo.vinNumber,this.carInfo.reqId)},methods:{getLogisticsGetDrivingRecord:function(t,e){var i=this;return Object(s["a"])(Object(a["a"])().mark((function r(){var n;return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={vinNumber:t,reqfoId:e},r.next=3,u(n).then((function(t){var e=t.data;i.loading=!1,i.startTime=Object(l["e"])(e[0].departureDate,"{m}/{d} {h}:{i} "),i.endTime=Object(l["e"])(e[0].returnTime,"{m}/{d} {h}:{i}"),0!==e.length&&e[0].simNumber?(i.simNumber=e[0].simNumber,i.getLogisticsTrajectoryAll()):i.$notify({type:"warning",message:"暂无行程轨迹!",onClose:function(){i.$router.back()}})})).catch((function(t){}));case 3:case"end":return r.stop()}}),r)})))()},getLogisticsTrajectoryAll:function(){var t=this;return Object(s["a"])(Object(a["a"])().mark((function e(){var i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={simNumber:t.simNumber,startTime:t.startTime,endTime:t.endTime},e.next=3,o(i).then((function(e){var i=e.data;t.replayList=i,t.drawRoute()})).catch((function(t){}));case 3:case"end":return e.stop()}}),e)})))()},drawRoute:function(){this.$refs.arcgis.contentWindow.drawRoute(this.replayList)},handleReplayClick:function(){0!==this.replayList.length?this.$refs.arcgis.contentWindow.moveReplay():this.$notify({type:"warning",message:"暂无行程轨迹!"})}}},h=m,f=(i("f5db"),i("2877")),d=Object(f["a"])(h,r,n,!1,null,"65fa1886",null);e["default"]=d.exports},f5db:function(t,e,i){"use strict";i("3028")}}]);