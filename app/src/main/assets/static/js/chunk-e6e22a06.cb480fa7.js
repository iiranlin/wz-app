(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6e22a06"],{6129:function(s,e,t){"use strict";t("cbd8")},"6b82":function(s,e,t){"use strict";t.r(e);t("caad");var i=function(){var s=this,e=s._self._c;return e("div",{ref:"container",staticClass:"main-container"},[e("van-tabs",{attrs:{sticky:!0,type:"card",color:"#0571ff","title-active-color":"#ffffff","title-inactive-color":"#2e2e2e"},model:{value:s.menuActiveIndex,callback:function(e){s.menuActiveIndex=e},expression:"menuActiveIndex"}},[e("van-tab",{attrs:{title:"待派单"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:s.waitRefresh},model:{value:s.waitRefreshLoading,callback:function(e){s.waitRefreshLoading=e},expression:"waitRefreshLoading"}},[e("van-list",{attrs:{finished:s.waitFinished,"finished-text":"没有更多了..."},on:{load:s.getWaitOrderList},model:{value:s.waitLoading,callback:function(e){s.waitLoading=e},expression:"waitLoading"}},s._l(s.waitOrderList,(function(t,i){return e("div",{key:i,staticClass:"order-info-item box-container",on:{click:function(e){return s.handleWaitItemClick(t)}}},[e("ul",{staticClass:"list-ul"},[1===t.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[s._v("长途单")])]):s._e(),e("li",[e("span",[s._v("出发时间：")]),e("span",[s._v(s._s(t.usageTimeStr))])]),e("li",[e("span",[s._v("出"+s._s(" ")+s._s(" ")+"发"+s._s(" ")+s._s(" ")+"地：")]),e("span",[s._v(s._s(t.fromAddr))])]),e("li",[e("span",[s._v("目"+s._s(" ")+s._s(" ")+"的"+s._s(" ")+s._s(" ")+"地：")]),e("span",[s._v(s._s(t.toAddr))])]),e("li",[e("span",[s._v("优先保障：")]),e("span",[s._v(s._s(s.checkGuarantee(t.guarantee)))])]),e("li",[e("span",[s._v("乘"+s._s(" ")+s._s(" ")+"车"+s._s(" ")+s._s(" ")+"人：")]),e("span",[s._v(s._s(t.userName))])]),e("li",[e("span",[s._v("用车事由：")]),e("span",[s._v(s._s(t.reason))])]),[1,2,3,4,6].includes(t.status)?s._e():e("li",[e("span",[s._v("分派司机：")]),1===t.reqAssignments.length?e("span",[s._v(s._s(t.reqAssignments[0].driver))]):t.reqAssignments.length>1?e("span",[s._v(s._s(t.reqAssignments[0].driver)+s._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[s._v(s._s(t.reqAssignments.length))]),e("span",[s._v(s._s(" ")+"人")])]):s._e()]),[1,2,3,4,6].includes(t.status)?s._e():e("li",[e("span",[s._v("分派车辆：")]),1===t.reqAssignments.length?e("span",[s._v(s._s(t.reqAssignments[0].carBrand)+s._s(" ")+s._s(t.reqAssignments[0].carSeries))]):t.reqAssignments.length>1?e("span",[s._v(s._s(t.reqAssignments[0].carBrand)+s._s(" ")+s._s(t.reqAssignments[0].carSeries)+s._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[s._v(s._s(t.reqAssignments.length))]),e("span",[s._v(s._s(" ")+"辆")])]):s._e()]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:s.checkStatusImage(t.status)}),e("span",{staticClass:"status-text"},[s._v(s._s(s.checkOrderStatus(t.status)))])]),![1,2,3,4,6].includes(t.status)&&t.reqAssignments.length>0?e("img",{attrs:{src:s.checkCarImagePath(t.reqAssignments[0].carBrand,t.reqAssignments[0].carSeries)}}):s._e()])])})),0)],1)],1),e("van-tab",{attrs:{title:"已派单"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:s.overRefresh},model:{value:s.overRefreshLoading,callback:function(e){s.overRefreshLoading=e},expression:"overRefreshLoading"}},[e("van-list",{attrs:{finished:s.overFinished,"finished-text":"没有更多了..."},on:{load:s.getOverOrderList},model:{value:s.overLoading,callback:function(e){s.overLoading=e},expression:"overLoading"}},s._l(s.overOrderList,(function(t,i){return e("div",{key:i,staticClass:"order-info-item box-container",on:{click:function(e){return s.handleOverItemClick(t)}}},[e("ul",{staticClass:"list-ul"},[1===t.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[s._v("长途单")])]):s._e(),e("li",[e("span",[s._v("出发时间：")]),e("span",[s._v(s._s(t.usageTimeStr))])]),e("li",[e("span",[s._v("出"+s._s(" ")+s._s(" ")+"发"+s._s(" ")+s._s(" ")+"地：")]),e("span",[s._v(s._s(t.fromAddr))])]),e("li",[e("span",[s._v("目"+s._s(" ")+s._s(" ")+"的"+s._s(" ")+s._s(" ")+"地：")]),e("span",[s._v(s._s(t.toAddr))])]),e("li",[e("span",[s._v("优先保障：")]),e("span",{class:["否"===s.checkGuarantee(t.guarantee)?"":"hight-red"]},[s._v(s._s(s.checkGuarantee(t.guarantee)))])]),e("li",[e("span",[s._v("乘"+s._s(" ")+s._s(" ")+"车"+s._s(" ")+s._s(" ")+"人：")]),e("span",[s._v(s._s(t.userName))])]),e("li",[e("span",[s._v("用车事由：")]),e("span",[s._v(s._s(t.reason))])]),[1,2,3,4,6].includes(t.status)?s._e():e("li",[e("span",[s._v("分派司机：")]),1===t.reqAssignments.length?e("span",[s._v(s._s(t.reqAssignments[0].driver))]):t.reqAssignments.length>1?e("span",[s._v(s._s(t.reqAssignments[0].driver)+s._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[s._v(s._s(t.reqAssignments.length))]),e("span",[s._v(s._s(" ")+"人")])]):s._e()]),[1,2,3,4,6].includes(t.status)?s._e():e("li",[e("span",[s._v("分派车辆：")]),1===t.reqAssignments.length?e("span",[s._v(s._s(t.reqAssignments[0].carBrand)+s._s(" ")+s._s(t.reqAssignments[0].carSeries))]):t.reqAssignments.length>1?e("span",[s._v(s._s(t.reqAssignments[0].carBrand)+s._s(" ")+s._s(t.reqAssignments[0].carSeries)+s._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[s._v(s._s(t.reqAssignments.length))]),e("span",[s._v(s._s(" ")+"辆")])]):s._e()]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:s.checkStatusImage(t.status)}),e("span",{staticClass:"status-text"},[s._v(s._s(s.checkOrderStatus(t.status)))])]),![1,2,3,4,6].includes(t.status)&&t.reqAssignments.length>0?e("img",{attrs:{src:s.checkCarImagePath(t.reqAssignments[0].carBrand,t.reqAssignments[0].carSeries)}}):s._e()])])})),0)],1)],1),e("van-tab",{attrs:{title:"历史订单"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:s.historyRefresh},model:{value:s.historyRefreshLoading,callback:function(e){s.historyRefreshLoading=e},expression:"historyRefreshLoading"}},[e("van-list",{attrs:{finished:s.historyFinished,"finished-text":"没有更多了..."},on:{load:s.getHistoryOrderList},model:{value:s.historyLoading,callback:function(e){s.historyLoading=e},expression:"historyLoading"}},s._l(s.historyOrderList,(function(t,i){return e("div",{key:i,staticClass:"order-info-item box-container",on:{click:function(e){return s.handleHistoryItemClick(t)}}},[e("ul",{staticClass:"list-ul"},[1===t.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[s._v("长途单")])]):s._e(),e("li",[e("span",[s._v("出发时间：")]),e("span",[s._v(s._s(t.usageTimeStr))])]),e("li",[e("span",[s._v("出"+s._s(" ")+s._s(" ")+"发"+s._s(" ")+s._s(" ")+"地：")]),e("span",[s._v(s._s(t.fromAddr))])]),e("li",[e("span",[s._v("目"+s._s(" ")+s._s(" ")+"的"+s._s(" ")+s._s(" ")+"地：")]),e("span",[s._v(s._s(t.toAddr))])]),e("li",[e("span",[s._v("优先保障：")]),e("span",[s._v(s._s(s.checkGuarantee(t.guarantee)))])]),e("li",[e("span",[s._v("乘"+s._s(" ")+s._s(" ")+"车"+s._s(" ")+s._s(" ")+"人：")]),e("span",[s._v(s._s(t.userName))])]),e("li",[e("span",[s._v("用车事由：")]),e("span",[s._v(s._s(t.reason))])]),[1,2,3,4,6].includes(t.status)?s._e():e("li",[e("span",[s._v("分派司机：")]),1===t.reqAssignments.length?e("span",[s._v(s._s(t.reqAssignments[0].driver))]):t.reqAssignments.length>1?e("span",[s._v(s._s(t.reqAssignments[0].driver)+s._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[s._v(s._s(t.reqAssignments.length))]),e("span",[s._v(s._s(" ")+"人")])]):s._e()]),[1,2,3,4,6].includes(t.status)?s._e():e("li",[e("span",[s._v("分派车辆：")]),1===t.reqAssignments.length?e("span",[s._v(s._s(t.reqAssignments[0].carBrand)+s._s(" ")+s._s(t.reqAssignments[0].carSeries))]):t.reqAssignments.length>1?e("span",[s._v(s._s(t.reqAssignments[0].carBrand)+s._s(" ")+s._s(t.reqAssignments[0].carSeries)+s._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[s._v(s._s(t.reqAssignments.length))]),e("span",[s._v(s._s(" ")+"辆")])]):s._e()]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:s.checkStatusImage(t.status)}),e("span",{staticClass:"status-text"},[s._v(s._s(s.checkOrderStatus(t.status)))])]),![1,2,3,4,6].includes(t.status)&&t.reqAssignments.length>0?e("img",{attrs:{src:s.checkCarImagePath(t.reqAssignments[0].carBrand,t.reqAssignments[0].carSeries)}}):s._e()])])})),0)],1)],1)],1),e("div",{staticClass:"add-btn",on:{click:function(e){return s.handleAddClick()}}})],1)},n=[],a=t("2909"),r=(t("99af"),t("7db0"),t("14d9"),t("d3b7"),t("0643"),t("fffc"),t("f8b7")),o=t("2f62"),c=t("b705"),u=t("0b8e"),d=t("fd99"),l={name:"DispatchOrderList",mixins:[d["a"]],computed:Object(o["b"])("DispathOrder",["isFefresh"]),beforeRouteEnter:function(s,e,t){t((function(e){var t=setTimeout((function(){e.$refs.container.scrollTop=s.meta.scrollTop,clearTimeout(t)}),0)}))},beforeRouteLeave:function(s,e,t){if("DispatchDetails"===s.name||"DispathApply"===s.name){var i=this.$refs.container,n=i.scrollTop;e.meta.scrollTop=n}t()},data:function(){return{menuActiveIndex:0,waitOrderList:[],waitRefreshLoading:!1,waitLoading:!1,waitFinished:!1,waitListQuery:{pageNum:1,pageSize:10,status:4},overOrderList:[],overRefreshLoading:!1,overLoading:!1,overFinished:!1,overListQuery:{pageNum:1,pageSize:10,dispatchedStatus:1},historyOrderList:[],historyRefreshLoading:!1,historyLoading:!1,historyFinished:!1,historyListQuery:{pageNum:1,pageSize:10,historyStatus:11},orderStatusOptions:[],guaranteeOptions:[],checkCarImagePath:u["a"]}},created:function(){this.getOrderStatusOptions(),this.getGuaranteeOptions()},activated:function(){this.isFefresh&&(this.waitRefresh(),this.overRefresh(),this.historyRefresh(),this.$store.dispatch("DispathOrder/triggerFefresh",!1)),this.$store.commit("removeThisPage","DispathApply"),this.$store.commit("removeThisPage","DispathPerfect"),this.$store.commit("removeThisPage","DispatchDetails")},methods:{getOrderStatusOptions:function(){var s=this;Object(c["a"])("1522830760585670657").then((function(e){var t=e.data;s.orderStatusOptions=t})).catch((function(s){}))},getGuaranteeOptions:function(){var s=this;Object(c["a"])("1679651627836055552").then((function(e){var t=e.data;s.guaranteeOptions=t})).catch((function(s){}))},getWaitOrderList:function(){var s=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["f"])(Object.assign({},this.waitListQuery)).then((function(e){var t=e.data;s.waitRefreshLoading&&(s.waitOrderList=[],s.waitRefreshLoading=!1),s.waitLoading=!1,s.waitOrderList=[].concat(Object(a["a"])(s.waitOrderList),Object(a["a"])(t.list)),t.hasNextPage?s.waitListQuery.pageNum=s.waitListQuery.pageNum+1:s.waitFinished=!0})).catch((function(e){s.waitLoading=!1,s.waitFinished=!0})).finally((function(){e.clear()}))},getOverOrderList:function(){var s=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["f"])(Object.assign({},this.overListQuery)).then((function(e){var t=e.data;s.overRefreshLoading&&(s.overOrderList=[],s.overRefreshLoading=!1),s.overLoading=!1,s.overOrderList=[].concat(Object(a["a"])(s.overOrderList),Object(a["a"])(t.list)),t.hasNextPage?s.overListQuery.pageNum=s.overListQuery.pageNum+1:s.overFinished=!0})).catch((function(e){s.overLoading=!1,s.overFinished=!0})).finally((function(){e.clear()}))},getHistoryOrderList:function(){var s=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(r["f"])(Object.assign({},this.historyListQuery)).then((function(e){var t=e.data;s.historyRefreshLoading&&(s.historyOrderList=[],s.historyRefreshLoading=!1),s.historyLoading=!1,s.historyOrderList=[].concat(Object(a["a"])(s.historyOrderList),Object(a["a"])(t.list)),t.hasNextPage?s.historyListQuery.pageNum=s.historyListQuery.pageNum+1:s.historyFinished=!0})).catch((function(e){s.historyLoading=!1,s.historyFinished=!0})).finally((function(){e.clear()}))},checkOrderStatus:function(s){var e=this.orderStatusOptions.find((function(e){return e.code==s}));return e?e.name:""},checkGuarantee:function(s){var e=this.guaranteeOptions.find((function(e){return e.code==s}));return e?e.name:""},checkStatusImage:function(s){return 1===s?"order-dsh":2===s?"order-shz":3===s?"order-ybh":4===s?"order-dpd":5===s?"order-ypd":6===s?"order-yqx":7===s||8===s?"order-yjd":9===s?"order-ycc":10===s?"order-yhc":11===s?"order-yqr":void 0},handleWaitItemClick:function(s){this.$router.push({name:"DispatchDetails",params:{id:s.id}})},handleOverItemClick:function(s){this.$router.push({name:"DispatchDetails",params:{id:s.id}})},handleHistoryItemClick:function(s){this.$router.push({name:"DispatchDetails",params:{id:s.id}})},handleAddClick:function(){this.$router.push({name:"DispathApply",params:{id:"0"}})},waitRefresh:function(){this.waitRefreshLoading=!0,this.waitLoading=!0,this.waitFinished=!1,this.waitListQuery.pageNum=1,this.getWaitOrderList()},overRefresh:function(){this.overRefreshLoading=!0,this.overLoading=!0,this.overFinished=!1,this.overListQuery.pageNum=1,this.getOverOrderList()},historyRefresh:function(){this.historyRefreshLoading=!0,this.historyLoading=!0,this.historyFinished=!1,this.historyListQuery.pageNum=1,this.getHistoryOrderList()}}},h=l,g=(t("6129"),t("2877")),f=Object(g["a"])(h,i,n,!1,null,"46bcdb1a",null);e["default"]=f.exports},cbd8:function(s,e,t){},f8b7:function(s,e,t){"use strict";t.d(e,"l",(function(){return n})),t.d(e,"m",(function(){return a})),t.d(e,"i",(function(){return r})),t.d(e,"j",(function(){return o})),t.d(e,"n",(function(){return c})),t.d(e,"b",(function(){return u})),t.d(e,"d",(function(){return d})),t.d(e,"e",(function(){return l})),t.d(e,"k",(function(){return h})),t.d(e,"c",(function(){return g})),t.d(e,"a",(function(){return f})),t.d(e,"f",(function(){return _})),t.d(e,"h",(function(){return v})),t.d(e,"g",(function(){return p}));var i=t("b775");function n(s){return Object(i["a"])({url:"/order/getOrderDetail",method:"GET",params:s})}function a(s){return Object(i["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:s})}function r(s){return Object(i["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:s})}function o(s){return Object(i["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:s})}function c(s){return Object(i["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:s})}function u(s){return Object(i["a"])({url:"/activiti/assigneeList",method:"post",data:s})}function d(s){return Object(i["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:s})}function l(s){return Object(i["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:s})}function h(s){return Object(i["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:s})}function g(s){return Object(i["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:s})}function f(s){return Object(i["a"])({url:"/activiti/assigneeListByType",method:"get",params:s})}function _(s){return Object(i["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:s})}function v(s){return Object(i["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:s})}function p(s){return Object(i["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:s})}},fd99:function(s,e,t){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);