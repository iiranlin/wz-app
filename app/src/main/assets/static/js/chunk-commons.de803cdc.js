(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{2847:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"img"==e.fileType&&e.showType,expression:"fileType == 'img' && showType"}]},[t("van-image-preview",{attrs:{images:e.images,startPosition:e.startPosition,loop:!1},model:{value:e.showImg,callback:function(t){e.showImg=t},expression:"showImg"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"pdf"==e.fileType&&e.showType,expression:"fileType == 'pdf' && showType"}]},[t("div",{staticClass:"pass_bullet_mark",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleClose.apply(null,arguments)}}},[t("div",{staticClass:"pass_bullet"},[t("div",{staticClass:"pass_bottom"},[t("div",{staticClass:"pdfContainer"},[t("div",{staticClass:"pdf"},[t("pdf",{ref:"pdf",attrs:{src:e.pdfUrl,page:e.currentPage,rotate:e.pageRotate},on:{"num-pages":function(t){e.pageCount=t},"page-loaded":function(t){e.currentPage=t},loaded:e.loadPdfHandler}})],1),t("div",{staticClass:"button"},[t("button",{attrs:{type:"success"},on:{click:function(t){return e.prev()}}},[e._v("上一页")]),t("button",{attrs:{type:"success"},on:{click:function(t){return e.next()}}},[e._v("下一页")])])])])])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"excel"==e.fileType&&e.showType,expression:"fileType == 'excel' && showType"}]},[t("div",{staticClass:"pass_bullet_mark",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleClose.apply(null,arguments)}}},[t("div",{staticClass:"pass_bullet"},[t("div",{staticClass:"pass_bottom"},[t("vue-office-excel",{staticStyle:{border:"none",width:"96vw",height:"80vh"},attrs:{src:e.excelUrl},on:{rendered:e.renderedHandler,error:e.errorHandler}})],1)])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"word"==e.fileType&&e.showType,expression:"fileType == 'word' && showType"}]},[t("div",{staticClass:"pass_bullet_mark",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleClose.apply(null,arguments)}}},[t("div",{staticClass:"pass_bullet"},[t("div",{staticClass:"pass_bottom"},[t("div",{staticClass:"docx-container"},[t("div",{ref:"file"})])])])])])])},i=[],n=a("c7eb"),r=a("1da1"),o=(a("4662"),a("28a2")),c=(a("c740"),a("4160"),a("14d9"),a("d3b7"),a("e25e"),a("3ca3"),a("0643"),a("4e3e"),a("159b"),a("ddb0"),a("2b3d"),a("bf19"),a("9861"),a("88a7"),a("271a"),a("5494"),a("b690")),l=a.n(c),d=a("858e"),u=(a("2c3a"),a("376d")),p=a("e782"),v={components:{VueOfficeExcel:l.a,Pdf:d["a"],ImagePreview:o["a"]},props:{fileType:{type:String,default:""}},data:function(){return{currentPage:0,pageCount:0,scale:100,pageRotate:0,startPosition:0,pdfUrl:"",images:[],excelUrl:"",showType:!1,showImg:!1}},methods:{showPdf:function(e){var t=this;this.showType=!0,Object(p["d"])(e).then((function(e){var a=window.URL.createObjectURL(new Blob([e]));t.pdfUrl=a})).catch((function(e){}))},showXlsx:function(e){var t=this;this.showType=!0,Object(p["d"])(e).then((function(e){var a=window.URL.createObjectURL(new Blob([e]));t.excelUrl=a})).catch((function(e){}))},showImage:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.forEach((function(e){Object(p["d"])(e.fileName).then((function(e){var t=window.URL.createObjectURL(new Blob([e]));a.images.push(t)})).catch((function(e){}))}));case 2:a.startPosition=t.findIndex((function(t){return e.fileName==t.fileName})),a.showType=!0,a.showImg=!0;case 5:case"end":return s.stop()}}),s)})))()},showWord:function(e){var t=this;Object(p["d"])(e).then((function(e){t.$nextTick((function(){Object(u["renderAsync"])(e,t.$refs.file,null),setTimeout((function(){t.showType=!0}),30)}))})).catch((function(e){}))},loadPdfHandler:function(e){this.currentPage=1,this.$refs.pdf.$el.style.width=parseInt(this.scale)+"%",this.$refs.pdf.$el.style.height=parseInt(this.scale)+"%"},prev:function(){this.currentPage>1&&this.currentPage--},next:function(){this.currentPage<this.pageCount&&this.currentPage++},handleClose:function(){this.fileType="",this.showType=!1},rendered:function(){console.log("渲染完成")},renderedHandler:function(){console.log("渲染完成")},errorHandler:function(){this.fileType="",this.showType=!1,this.$notify({type:"warning",message:"该文件暂无法查看"}),console.log("渲染失败")},noLoading:function(){this.$emit("noLoading")}}},f=v,h=(a("bd38"),a("2877")),_=Object(h["a"])(f,s,i,!1,null,"6dfee034",null);t["a"]=_.exports},6321:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.handlePopupClose},model:{value:e.showAssignee,callback:function(t){e.showAssignee=t},expression:"showAssignee"}},[t("div",{staticClass:"popup-title"},[e._v("请选择下一级审批人")]),t("van-tree-select",{attrs:{items:e.assigneeList,"active-id":e.activeIds,"main-active-index":e.activeIndex},on:{"update:activeId":function(t){e.activeIds=t},"update:active-id":function(t){e.activeIds=t},"update:mainActiveIndex":function(t){e.activeIndex=t},"update:main-active-index":function(t){e.activeIndex=t}}}),t("van-button",{attrs:{round:"",type:"info"},on:{click:e.handleTreeSelect}},[e._v("确定")])],1)},i=[],n={props:{assigneePopupShow:{type:Boolean,default:!1},assigneeList:{type:Array,default:[]}},data:function(){return{showAssignee:!1,activeIds:[],activeIndex:0}},methods:{handlePopupClose:function(){this.$emit("assigneeSelected")},handleTreeSelect:function(){0!=this.activeIds.length?this.$emit("assigneeSelected",this.activeIds):this.$notify({type:"warning",message:"请选择审批人!"})}},watch:{assigneePopupShow:function(e,t){this.showAssignee=e}}},r=n,o=(a("ee62"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"321bd534",null);t["a"]=c.exports},"8a60":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:[e.hasButton?"detail-container":"main-container"]},[e.orderDetail.reqNo?t("div",{staticClass:"order-info box-container"},[t("div",[t("span",{staticClass:"title"},[e._v("申请单号：")]),t("span",{staticClass:"order-code"},[e._v(e._s(e.orderDetail.reqNo))])]),e.isDrivingDetail?t("div",{staticClass:"order-status"},[t("i",{staticClass:"default-icon-i",class:e.checkDrivingStatusImage(e.orderDetail.status)}),t("span",{staticClass:"status-text"},[e._v(e._s(e.checkDrivingOrderStatus(e.orderDetail.status)))])]):t("div",{staticClass:"order-status"},[t("i",{staticClass:"default-icon-i",class:e.checkStatusImage(e.orderDetail.status)}),t("span",{staticClass:"status-text"},[e._v(e._s(e.checkOrderStatus(e.orderDetail.status)))])])]):e._e(),t("div",{staticClass:"base-info box-container"},[t("ul",[t("li",[t("i"),t("span",[e._v("出发地：")]),t("span",[e._v(e._s(e.fromatAddress(e.orderDetail.fromAddr)))])]),t("li",[t("i"),t("span",[e._v("目的地：")]),t("span",[e._v(e._s(e.fromatAddress(e.orderDetail.toAddr)))])]),t("li",[t("i"),t("span",[e._v("时"+e._s("　")+"间：")]),t("span",[e._v(e._s(e.orderDetail.usageDate)+" "+e._s(e.orderDetail.usageTime))])])])]),"3"!=e.orderDetail.status&&"6"!=e.orderDetail.status||e.isDrivingDetail?e._e():t("div",{staticClass:"abnormal-info box-container"},[t("span",{staticClass:"abnormal-title"},[e._v(e._s(e.checkAbnormlTitle(e.orderDetail.status)))]),t("span",{staticClass:"abnormal-des"},[e._v(e._s(e.checkAbnormlDes(e.orderDetail.status)))])]),e.isDrivingDetail?t("div",{staticClass:"reqAssignment-info"},[t("div",{staticClass:"reqAssignment-item box-container"},[t("div",{staticClass:"car-info"},[t("span",[e._v(e._s(e.orderDetail.carNumber))]),t("span",[e._v(e._s(e.orderDetail.carBrand)+" "+e._s(e.orderDetail.carSeries))])]),t("div",{staticClass:"driver-info"},[t("span",[e._v("司机："+e._s(e.orderDetail.driver))]),t("span",[e._v(e._s(e.orderDetail.driverPhone))])]),t("img",{staticClass:"car-img",attrs:{src:e.checkCarImagePath(e.orderDetail.carBrand,e.orderDetail.carSeries)},on:{click:function(t){return e.handleImageClick(e.orderDetail)}}})])]):e._e(),e.orderDetail.reqAssignments&&!e.isDrivingDetail?t("div",{staticClass:"reqAssignment-info"},e._l(e.orderDetail.reqAssignments,(function(a,s){return t("div",{key:a.driverCode},["1"!=a.restatus?t("div",{staticClass:"reqAssignment-item box-container"},[t("div",{staticClass:"car-info"},[10===e.orderDetail.status||11===e.orderDetail.status?t("span",{staticClass:"blue-weight",on:{click:function(t){return e.handleRouteClick(a)}}},[e._v(e._s(a.carNumber))]):t("span",[e._v(e._s(a.carNumber))]),t("span",[e._v(e._s(a.carBrand)+" "+e._s(a.carSeries))])]),t("div",{staticClass:"driver-info"},[t("span",[e._v("司机："+e._s(a.driver))]),"4"==e.orderDetail.status?t("span",[e._v(e._s(a.phone))]):t("span",{staticClass:"blue-weight",on:{click:function(t){return e.teleponeClick(a.phone)}}},[e._v(e._s(a.driverPhone))])]),t("img",{staticClass:"car-img",attrs:{src:e.checkCarImagePath(a.carBrand,a.carSeries)},on:{click:function(t){return e.handleImageClick(a)}}}),"4"==e.orderDetail.status?t("div",{staticClass:"button-control"},[t("div",{staticClass:"button",on:{click:function(t){return e.teleponeClick(a.phone)}}},[t("img",{attrs:{src:"/static/icon-phone.png"}}),t("span",[e._v("联系司机")])]),t("div",{staticClass:"button",on:{click:function(t){return e.handleDeleteCar(s)}}},[t("img",{attrs:{src:"/static/icon-delete.png"}}),t("span",[e._v("删除")])])]):e._e()]):e._e()])})),0):e._e(),t("div",{staticClass:"passenger-info box-container"},[e._m(0),t("div",[t("ul",{staticClass:"detail-ul"},[t("li",[t("span",[e._v("申请人：")]),t("span",[e._v(e._s(e.orderDetail.handleUserName))])]),t("li",[t("span",[e._v("乘车人：")]),t("span",[e._v(e._s(e.orderDetail.userName))])]),t("li",{on:{click:function(t){return e.teleponeClick(e.orderDetail.phone)}}},[t("span",[e._v("电话：")]),t("span",{staticClass:"blue-weight"},[e._v(e._s(e.orderDetail.phone))])]),t("li",[t("span",[e._v("单位：")]),t("span",[e._v(e._s(e.orderDetail.unitName))])]),t("li",[t("span",[e._v("部门：")]),t("span",[e._v(e._s(e.orderDetail.deptName))])])])])]),t("div",{staticClass:"vehicle-info box-container"},[e._m(1),t("div",[t("ul",{staticClass:"detail-ul"},[e.isDrivingDetail?e._e():t("li",[t("span",[e._v("优先保障：")]),t("span",{class:["否"===e.checkGuarantee(e.orderDetail.guarantee)?"":"hight-red"]},[e._v(e._s(e.checkGuarantee(e.orderDetail.guarantee)))])]),t("li",[t("span",[e._v("用车事由：")]),t("span",[e._v(e._s(e.orderDetail.reason))])]),t("li",[t("span",[e._v("用车需求：")]),t("span",[e._v(e._s(e.orderDetail.demand))])]),t("li",[t("span",[e._v("用车时长：")]),t("div",[t("span",{staticClass:"blue-weight"},[e._v(e._s(e.orderDetail.timeLength))]),t("span",[e._v(" 小时")])])]),t("li",[t("span",[e._v("是否长途：")]),t("span",[e._v(e._s("1"==e.orderDetail.longDistanceTag?"是":"否"))])]),t("li",[t("span",[e._v("期望车型：")]),t("span",[e._v(e._s(e.checkHopeBrand(e.orderDetail.hopeBrand)))])]),t("li",[t("span",[e._v("乘坐人数：")]),t("div",[t("span",{staticClass:"blue-weight"},[e._v(e._s(e.orderDetail.usagePersons))]),t("span",[e._v(" 人")])])]),t("li",[t("span",[e._v("转派信息：")]),t("span",[e._v(e._s(e.checkReassign(e.orderDetail.reassignStr)))])]),t("li",{staticClass:"li-item-remark"},[t("span",[e._v("备注：")]),t("div",{staticClass:"remark-detail"},[e._v(e._s(e.orderDetail.remark||"未填写"))])])])])]),e.isDrivingDetail?t("div",{staticClass:"vehicle-info box-container"},[e._m(2),t("div",[t("ul",{staticClass:"detail-ul"},[t("li",[t("span",[e._v("出车里程：")]),t("div",[t("span",{staticClass:"blue-weight"},[e._v(e._s(e.orderDetail.beginMiles||0))]),t("span",[e._v(" 千米")])])]),t("li",[t("span",[e._v("还车里程：")]),t("div",[t("span",{staticClass:"blue-weight"},[e._v(e._s(e.orderDetail.endMiles||0))]),t("span",[e._v(" 千米")])])]),t("li",[t("span",[e._v("等待时长：")]),t("div",[t("span",{staticClass:"blue-weight"},[e._v(e._s(e.orderDetail.waitTimes||0))]),t("span",[e._v(" 小时")])])]),t("li",{staticClass:"li-item-remark"},[t("span",[e._v("行程描述：")]),t("div",{staticClass:"remark-detail"},[e._v(e._s(e.orderDetail.itinerayDescription||"未填写"))])])])])]):e._e(),e.logList.length>0?t("div",{staticClass:"approve-info box-container"},[e._m(3),t("div",{staticClass:"flow-info"},[t("ul",e._l(e.logList,(function(a,s){return t("li",{key:s},[t("div",{staticClass:"top-info"},[t("img",{attrs:{src:e.checkStatusCircle(a.operationType)}}),t("span",{staticClass:"assigneeName"},[e._v(e._s(a.operator))]),t("span",{staticClass:"status"},[e._v(e._s(e.checkStatusSuccess(a.operationType)))]),t("span",{staticClass:"endTime"},[e._v(e._s(e.parseTime(a.createTime,"{y}-{m}-{d} {h}:{i}")))])]),t("div",{staticClass:"middle-info"},[t("span",{staticClass:"actName"},[e._v("审批人")]),t("span",{staticClass:"status"},[e._v(e._s(e.checkStatusError(a.operationType)))])]),"auditReject"==a.operationType?t("div",{staticClass:"bottom-info"},[t("span",{staticClass:"message"},[e._v("审批意见："+e._s(a.sdesc))])]):e._e()])})),0)])]):e._e()])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"detail-title-info"},[t("img",{attrs:{src:"/static/icon-passenger.png"}}),t("span",{staticClass:"info-title"},[e._v("乘车人")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"detail-title-info"},[t("img",{attrs:{src:"/static/icon-vehicle.png"}}),t("span",{staticClass:"info-title"},[e._v("用车信息")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"detail-title-info"},[t("img",{attrs:{src:"/static/icon-vehicle.png"}}),t("span",{staticClass:"info-title"},[e._v("行车信息")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"detail-title-info"},[t("img",{attrs:{src:"/static/icon-approve.png"}}),t("span",{staticClass:"info-title"},[e._v("审批流程")])])}],n=(a("4de4"),a("7db0"),a("14d9"),a("d3b7"),a("ac1f"),a("5319"),a("5b81"),a("0643"),a("2382"),a("fffc"),a("b705")),r=a("0b8e"),o={name:"GeneralOrderDetail",props:{orderDetail:{type:Object,default:function(){return{}}},approveLogList:{type:Array,default:function(){return[]}},isDrivingDetail:{type:Boolean,default:function(){return!1}},hasButton:{type:Boolean,default:function(){return!1}}},watch:{approveLogList:{handler:function(e){this.logList=e.filter((function(e){return"startAudit"==e.operationType||"auditPass"==e.operationType||"auditComplete"==e.operationType||"auditReject"==e.operationType}))},immediate:!0}},data:function(){return{logList:[],orderStatusOptions:[],hopeBrandOptions:[],guaranteeOptions:[],checkCarImagePath:r["a"]}},created:function(){this.getOrderStatusOptions(),this.getHopeBrandOptions(),this.getGuaranteeOptions()},methods:{getOrderStatusOptions:function(){var e=this,t=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(n["a"])("1522830760585670657").then((function(t){var a=t.data;e.orderStatusOptions=a})).catch((function(e){})).finally((function(){t.clear()}))},getHopeBrandOptions:function(){var e=this,t=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(n["a"])("101801").then((function(t){var a=t.data;e.hopeBrandOptions=a})).catch((function(e){})).finally((function(){t.clear()}))},getGuaranteeOptions:function(){var e=this,t=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(n["a"])("1679651627836055552").then((function(t){var a=t.data;e.guaranteeOptions=a})).catch((function(e){})).finally((function(){t.clear()}))},checkDrivingOrderStatus:function(e){var t="";switch(e){case"1":t="待接单";break;case"2":t="待出车";break;case"3":t="拒绝接单";break;case"4":t="已出车";break;case"5":t="已还车";break;case"6":t="转派";break;case"7":t="已确认";break;case"8":t="拒绝再派单";break;default:break}return t},checkDrivingStatusImage:function(e){return"1"===e||"2"===e?"order-dsh":"3"===e?"order-ybh":"4"===e?"order-ycc":"5"===e?"order-yhc":"6"===e?"order-ybh":"7"===e?"order-yqr":"8"===e?"order-ybh":void 0},checkOrderStatus:function(e){var t=this.orderStatusOptions.find((function(t){return t.code==e}));return t?t.name:""},checkStatusImage:function(e){return 1===e?"order-dsh":2===e?"order-shz":3===e?"order-ybh":4===e?"order-dpd":5===e?"order-ypd":6===e?"order-yqx":7===e||8===e?"order-yjd":9===e?"order-ycc":10===e?"order-yhc":11===e?"order-yqr":void 0},fromatAddress:function(e){if(e)return e.replaceAll("/","")},checkAbnormlTitle:function(e){return"3"==e?"驳回原因":"6"==e?"取消原因":void 0},checkAbnormlDes:function(e){return"3"==e?this.orderDetail.auditComment||"未填写":"6"==e?this.orderDetail.closeReason||"未填写":void 0},teleponeClick:function(e){this.$ww.biz.telephone.showCallMenu({phoneNumber:e,code:"+86",onSuccess:function(){alert("拨打电话成功!")},onFail:function(e){alert(e)}})},checkGuarantee:function(e){var t=this.guaranteeOptions.find((function(t){return t.code==e}));return t?t.name:""},checkHopeBrand:function(e){var t=this.hopeBrandOptions.find((function(t){return t.code==e}));return t?t.name:""},checkReassign:function(e){return"0"==e?"转入":"1"==e?"转出":void 0},checkStatusCircle:function(e){return"create"==e||"startAudit"==e||"auditPass"==e||"auditComplete"==e?"/static/icon-flow-circle-blue.webp":"auditReject"==e?"/static/icon-flow-circle-orange.png":"/static/icon-flow-circle-gray.png"},checkStatusSuccess:function(e){return"create"==e?"":"startAudit"==e?"（发起人）":"auditPass"==e||"auditComplete"==e?"（通过）":""},checkStatusError:function(e){return"auditReject"==e?"不通过":""},handleImageClick:function(e){this.$router.push({name:"Car3d",params:{carSeries:e.carSeries,carBrand:e.carBrand}})},handleRouteClick:function(e){this.$router.push({name:"ArcgisMap",params:{carInfo:e}})},handleDeleteCar:function(e){this.$emit("handleDeleteCar",e)}}},c=o,l=(a("93d3"),a("2877")),d=Object(l["a"])(c,s,i,!1,null,"61e43bc2",null);t["a"]=d.exports},"93d3":function(e,t,a){"use strict";a("cc42")},a905:function(e,t,a){},bd38:function(e,t,a){"use strict";a("a905")},cc42:function(e,t,a){},da01:function(e,t,a){},ee62:function(e,t,a){"use strict";a("da01")}}]);