(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e907910"],{"26c3":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return s})),i.d(e,"e",(function(){return c})),i.d(e,"i",(function(){return o})),i.d(e,"g",(function(){return l})),i.d(e,"f",(function(){return u})),i.d(e,"h",(function(){return f})),i.d(e,"j",(function(){return d})),i.d(e,"a",(function(){return h})),i.d(e,"k",(function(){return p}));var n=i("b775");function a(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/listPage",method:"GET",params:t})}function r(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/listPage",method:"GET",params:t})}function s(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/driving/checkDriving",method:"GET",params:t})}function c(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/cancelOrder",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/takeOrder",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/remind",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/driving",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/gcywVehicleReqAssignmennt/returning",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/minio/upload",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/vehicleInfo/isRestriction",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/vehicleInfo/detail/".concat(t),method:"get"})}},4230:function(t,e,i){"use strict";i("b3c7")},"5a0c":function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){"use strict";var t=1e3,e=6e4,i=36e5,n="millisecond",a="second",r="minute",s="hour",c="day",o="week",l="month",u="quarter",f="year",d="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||e[0])+"]"}},v=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},y={s:v,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),a=i%60;return(e<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var n=12*(i.year()-e.year())+(i.month()-e.month()),a=e.clone().add(n,l),r=i-a<0,s=e.clone().add(n+(r?-1:1),l);return+(-(n+(i-a)/(r?a-s:s-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:f,w:o,d:c,D:d,h:s,m:r,s:a,ms:n,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",D={};D[b]=g;var $="$isDayjsObject",C=function(t){return t instanceof O||!(!t||!t[$])},w=function t(e,i,n){var a;if(!e)return b;if("string"==typeof e){var r=e.toLowerCase();D[r]&&(a=r),i&&(D[r]=i,a=r);var s=e.split("-");if(!a&&s.length>1)return t(s[0])}else{var c=e.name;D[c]=e,a=c}return!n&&a&&(b=a),a||!n&&b},P=function(t,e){if(C(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new O(i)},x=y;x.l=w,x.i=C,x.w=function(t,e){return P(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var O=function(){function g(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[$]=!0}var v=g.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var a=n[2]-1||0,r=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(e)}(t),this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return x},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(t,e){var i=P(t);return this.startOf(e)<=i&&i<=this.endOf(e)},v.isAfter=function(t,e){return P(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<P(t)},v.$g=function(t,e,i){return x.u(t)?this[e]:this.set(i,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var i=this,n=!!x.u(e)||e,u=x.p(t),h=function(t,e){var a=x.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return n?a:a.endOf(c)},p=function(t,e){return x.w(i.toDate()[t].apply(i.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case f:return n?h(1,0):h(31,11);case l:return n?h(1,g):h(0,g+1);case o:var b=this.$locale().weekStart||0,D=(m<b?m+7:m)-b;return h(n?v-D:v+(6-D),g);case c:case d:return p(y+"Hours",0);case s:return p(y+"Minutes",1);case r:return p(y+"Seconds",2);case a:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var i,o=x.p(t),u="set"+(this.$u?"UTC":""),h=(i={},i[c]=u+"Date",i[d]=u+"Date",i[l]=u+"Month",i[f]=u+"FullYear",i[s]=u+"Hours",i[r]=u+"Minutes",i[a]=u+"Seconds",i[n]=u+"Milliseconds",i)[o],p=o===c?this.$D+(e-this.$W):e;if(o===l||o===f){var m=this.clone().set(d,1);m.$d[h](p),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[x.p(t)]()},v.add=function(n,u){var d,h=this;n=Number(n);var p=x.p(u),m=function(t){var e=P(h);return x.w(e.date(e.date()+Math.round(t*n)),h)};if(p===l)return this.set(l,this.$M+n);if(p===f)return this.set(f,this.$y+n);if(p===c)return m(1);if(p===o)return m(7);var g=(d={},d[r]=e,d[s]=i,d[a]=t,d)[p]||1,v=this.$d.getTime()+n*g;return x.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",a=x.z(this),r=this.$H,s=this.$m,c=this.$M,o=i.weekdays,l=i.months,u=i.meridiem,f=function(t,i,a,r){return t&&(t[i]||t(e,n))||a[i].slice(0,r)},d=function(t){return x.s(r%12||12,t,"0")},p=u||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n};return n.replace(m,(function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return x.s(e.$y,4,"0");case"M":return c+1;case"MM":return x.s(c+1,2,"0");case"MMM":return f(i.monthsShort,c,l,3);case"MMMM":return f(l,c);case"D":return e.$D;case"DD":return x.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(i.weekdaysMin,e.$W,o,2);case"ddd":return f(i.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(r);case"HH":return x.s(r,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(r,s,!0);case"A":return p(r,s,!1);case"m":return String(s);case"mm":return x.s(s,2,"0");case"s":return String(e.$s);case"ss":return x.s(e.$s,2,"0");case"SSS":return x.s(e.$ms,3,"0");case"Z":return a}return null}(t)||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,d,h){var p,m=this,g=x.p(d),v=P(n),y=(v.utcOffset()-this.utcOffset())*e,b=this-v,D=function(){return x.m(m,v)};switch(g){case f:p=D()/12;break;case l:p=D();break;case u:p=D()/3;break;case o:p=(b-y)/6048e5;break;case c:p=(b-y)/864e5;break;case s:p=b/i;break;case r:p=b/e;break;case a:p=b/t;break;default:p=b}return h?p:x.a(p)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return D[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=w(t,e,!0);return n&&(i.$L=n),i},v.clone=function(){return x.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),_=O.prototype;return P.prototype=_,[["$ms",n],["$s",a],["$m",r],["$H",s],["$W",c],["$M",l],["$y",f],["$D",d]].forEach((function(t){_[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),P.extend=function(t,e){return t.$i||(t(e,O,P),t.$i=!0),P},P.locale=w,P.isDayjs=C,P.unix=function(t){return P(1e3*t)},P.en=D[b],P.Ls=D,P.p={},P}))},"986e":function(t,e,i){"use strict";var n=i("2b0e"),a=new n["d"]({});e["a"]=a},a65c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-container"},[e("div",{staticClass:"car-rental-info box-container"},[t._m(0),e("div",[e("ul",{staticClass:"car-rental-create-ul"},[e("li",{staticClass:"li-double",on:{click:function(e){return t.handleUnitClick()}}},[e("img",{staticClass:"img-icon",attrs:{src:"/static/icon-base-unit.png"}}),e("span",{staticClass:"title"},[t._v("用车单位：")]),e("span",{staticClass:"content"},[t._v(t._s(t.unitAndDeptName))]),e("img",{staticClass:"img-arrow",attrs:{src:"/static/icon-arrow-right.png"}})]),e("li",{staticClass:"li-single",on:{click:function(e){t.showPlanBeginDate=!0}}},[e("img",{staticClass:"img-icon",attrs:{src:"/static/icon-base-date.png"}}),e("span",{staticClass:"title"},[t._v("起租日期：")]),e("span",{staticClass:"content"},[t._v(t._s(t.formData.planBeginDate))]),e("img",{staticClass:"img-arrow",attrs:{src:"/static/icon-arrow-right.png"}})]),e("li",{staticClass:"li-single",on:{click:function(e){t.showPlanEndDate=!0}}},[e("span",{staticClass:"title"},[t._v("到期日期：")]),e("span",{staticClass:"content"},[t._v(t._s(t.formData.planEndDate))]),e("img",{staticClass:"img-arrow",attrs:{src:"/static/icon-arrow-right.png"}})]),e("li",{staticClass:"li-single",on:{click:function(e){t.vehiclePropertiesPicker=!0}}},[e("span",{staticClass:"title"},[t._v("租赁类型：")]),e("span",{staticClass:"content"},[t._v(t._s(t.formData.vehiclePropertiesName))]),e("img",{staticClass:"img-arrow",attrs:{src:"/static/icon-arrow-right.png"}})]),e("li",{staticClass:"li-single-edit-unit"},[e("img",{staticClass:"img-icon",attrs:{src:"/static/icon-base-price.png"}}),e("van-field",{attrs:{label:"租赁总价格：","label-width":"110px","input-align":"right",placeholder:"自动带入",maxlength:"10",readonly:""},on:{input:function(e){return t.handleNumberLimit(t.formData,"planRentPrice",7)}},scopedSlots:t._u([{key:"extra",fn:function(){return[e("span",[t._v("元")])]},proxy:!0}]),model:{value:t.formData.planRentPrice,callback:function(e){t.$set(t.formData,"planRentPrice",e)},expression:"formData.planRentPrice"}})],1)])])]),e("div",{staticClass:"car-rental-info box-container"},[t._m(1),t._l(t.carList,(function(i,n){return e("div",{key:n,staticClass:"car-rental-item"},[e("ul",{staticClass:"car-rental-create-ul"},[e("li",{staticClass:"li-single-edit-extra"},[e("van-field",{attrs:{required:"4"!==t.formData.vehicleProperties,label:"车辆类型：","label-width":"110px","input-align":"right",placeholder:"请选择车辆类型"},on:{click:function(e){return t.handleCarTypeClick(n)}},model:{value:i.carTypeAll,callback:function(e){t.$set(i,"carTypeAll",e)},expression:"item.carTypeAll"}}),t._m(2,!0)],1),e("li",{staticClass:"li-single-edit-extra"},[e("van-field",{attrs:{required:"",label:"计划租赁价格：","label-width":"130px","input-align":"right",placeholder:"录入总包价",maxlength:"10"},on:{input:function(e){return t.handleNumberLimit(i,"planRentPrice",7)},blur:function(e){return t.handlePlanRentPriceBlur()}},model:{value:i.planRentPrice,callback:function(e){t.$set(i,"planRentPrice",e)},expression:"item.planRentPrice"}}),t._m(3,!0)],1),e("li",{staticClass:"li-single-edit"},[e("van-field",{attrs:{required:"4"!==t.formData.vehicleProperties,label:"品牌：","label-width":"110px","input-align":"right",placeholder:"请输入品牌名称"},model:{value:i.planCarBrand,callback:function(e){t.$set(i,"planCarBrand",e)},expression:"item.planCarBrand"}})],1),e("li",{staticClass:"li-single-edit"},[e("van-field",{attrs:{required:"4"!==t.formData.vehicleProperties,label:"型号：","label-width":"110px","input-align":"right",placeholder:"请输入型号"},model:{value:i.planCarSeries,callback:function(e){t.$set(i,"planCarSeries",e)},expression:"item.planCarSeries"}})],1),e("li",{staticClass:"li-single-edit"},[e("van-field",{attrs:{required:"4"!==t.formData.vehicleProperties,label:"座位数：","label-width":"110px","input-align":"right",placeholder:"请输入座位数",maxlength:"2"},on:{input:function(e){return t.handleNumberLimit(i,"planMaxMens",2,0)}},model:{value:i.planMaxMens,callback:function(e){t.$set(i,"planMaxMens",e)},expression:"item.planMaxMens"}})],1),e("li",{staticClass:"li-single-edit-extra"},[e("van-field",{attrs:{required:"4"!==t.formData.vehicleProperties,label:"排气量：","label-width":"110px","input-align":"right",placeholder:"请输入排气量",maxlength:"4"},on:{input:function(e){return t.handleNumberLimit(i,"planCapacity",2,1)}},model:{value:i.planCapacity,callback:function(e){t.$set(i,"planCapacity",e)},expression:"item.planCapacity"}}),t._m(4,!0)],1),e("li",{staticClass:"li-single-edit-extra"},[e("van-field",{attrs:{required:"4"!==t.formData.vehicleProperties,label:"购车价格：","label-width":"110px","input-align":"right",placeholder:"请输入购车价格",maxlength:"10"},on:{input:function(e){return t.handleNumberLimit(i,"planPrice",7)}},model:{value:i.planPrice,callback:function(e){t.$set(i,"planPrice",e)},expression:"item.planPrice"}}),t._m(5,!0)],1)]),e("div",{staticClass:"car-rental-button"},[n==t.carList.length-1?e("van-button",{staticClass:"add",attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.addCarInfo()}}},[t._v("添加车辆")]):t._e(),t.carList.length>1?e("van-button",{staticClass:"delete",attrs:{block:"",type:"default",round:""},on:{click:function(e){return t.deleteCarInfo(n)}}},[t._v("删除车辆")]):t._e()],1)])}))],2),e("div",{staticClass:"car-rental-info box-container"},[t._m(6),e("div",[e("ul",{staticClass:"car-rental-create-ul"},[e("li",{staticClass:"li-single-edit"},[e("van-field",{attrs:{required:"",label:"申请人：","label-width":"110px","input-align":"right",placeholder:"请输入申请人"},model:{value:t.formData.creator,callback:function(e){t.$set(t.formData,"creator",e)},expression:"formData.creator"}})],1),e("li",{staticClass:"li-single-edit"},[e("van-field",{attrs:{required:"",label:"联系电话：","label-width":"110px","input-align":"right",placeholder:"请输入申请人联系电话"},on:{input:function(e){return t.handleNumberLimit(t.formData,"createPhone",20)}},model:{value:t.formData.createPhone,callback:function(e){t.$set(t.formData,"createPhone",e)},expression:"formData.createPhone"}})],1),e("li",{staticClass:"li-edit-remark"},[e("van-field",{attrs:{required:"",label:"租赁描述：","label-width":"110px",rows:"2",autosize:"",type:"textarea","show-word-limit":"",maxlength:"200",placeholder:"请输入租赁描述"},model:{value:t.formData.rentApplydesc,callback:function(e){t.$set(t.formData,"rentApplydesc",e)},expression:"formData.rentApplydesc"}})],1)])])]),e("div",{staticClass:"car-rental-info box-container"},[t._m(7),e("div",[e("ul",{staticClass:"car-rental-create-file-ul"},t._l(t.appendixList,(function(i,n){return e("li",{key:n},[e("div",{staticClass:"file-info"},[e("img",{attrs:{src:t.checkFileImage(i.originalFileName)}}),e("span",[t._v(t._s(i.originalFileName))]),e("img",{staticClass:"file-delete",attrs:{src:"/static/icon-file-delete.png"},on:{click:function(e){return t.handleFileDelete()}}})]),e("div",{staticClass:"des-info"},[e("van-field",{attrs:{required:"",label:"附件说明：","label-width":"110px","input-align":"right",maxlength:"50",placeholder:"请输入附件说明"},model:{value:i.fileDesc,callback:function(e){t.$set(i,"fileDesc",e)},expression:"item.fileDesc"}})],1)])})),0)]),e("div",{staticClass:"file-add"},[e("van-uploader",{attrs:{"preview-imag":!1,"after-read":t.afterReadTransfer,"before-read":t.beforeRead,accept:""}},[e("van-button",{attrs:{icon:"plus",type:"default",round:"",block:""}},[t._v("上传文件")])],1)],1)]),e("div",{staticClass:"default-button-container-one"},[e("van-button",{attrs:{block:"",type:"info",round:""},on:{click:function(e){return t.handleAdopt()}}},[t._v("提交")])],1),e("van-calendar",{attrs:{"min-date":new Date,"max-date":new Date(2050,0,31)},on:{confirm:t.planBeginDateConfirm},model:{value:t.showPlanBeginDate,callback:function(e){t.showPlanBeginDate=e},expression:"showPlanBeginDate"}}),e("van-calendar",{attrs:{"min-date":new Date,"max-date":new Date(2050,0,31)},on:{confirm:t.planEndDateConfirm},model:{value:t.showPlanEndDate,callback:function(e){t.showPlanEndDate=e},expression:"showPlanEndDate"}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.vehiclePropertiesPicker,callback:function(e){t.vehiclePropertiesPicker=e},expression:"vehiclePropertiesPicker"}},[e("van-picker",{key:t.pickRefreshNumber,ref:"vanPicker",attrs:{"show-toolbar":"","value-key":"name","default-index":t.vehiclePropertiesPickerActiveIndex,columns:t.vehiclePropertiesOptions},on:{confirm:t.vehiclePropertiesConfirm,cancel:function(e){t.vehiclePropertiesPicker=!1}}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.assigneeShow,callback:function(e){t.assigneeShow=e},expression:"assigneeShow"}},[e("div",{staticClass:"popup-title"},[e("span",[t._v("请选择审批人")]),e("van-button",{staticClass:"more-button",attrs:{type:"info",size:"small","native-type":"button"},on:{click:t.handleMoreClick}},[t._v("更多审核人")])],1),e("van-tree-select",{attrs:{"active-id":t.candidateUser,"main-active-index":t.activeIndex,items:t.assigneeList},on:{"update:activeId":function(e){t.candidateUser=e},"update:active-id":function(e){t.candidateUser=e},"update:mainActiveIndex":function(e){t.activeIndex=e},"update:main-active-index":function(e){t.activeIndex=e}}}),e("van-button",{staticClass:"van-button-sure",attrs:{"native-type":"button"},on:{click:t.handleTreeSelect}},[t._v("确定")])],1)],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-base.png"}}),e("span",{staticClass:"info-title"},[t._v("基本信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-vehicle.png"}}),e("span",{staticClass:"info-title"},[t._v("车型信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"extra"},[e("img",{attrs:{src:"/static/icon-arrow-right.png"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"extra"},[e("span",[t._v("元")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"extra"},[e("span",[t._v("T/L")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"extra"},[e("span",[t._v("元")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-passenger.png"}}),e("span",{staticClass:"info-title"},[t._v("其他")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-title-info"},[e("img",{attrs:{src:"/static/icon-passenger.png"}}),e("span",{staticClass:"info-title"},[t._v("附件")]),e("span",{staticClass:"tip"},[t._v("必须上传租赁价格说明文件")])])}],r=i("5530"),s=(i("4de4"),i("7db0"),i("4160"),i("baa5"),i("14d9"),i("a434"),i("a9e3"),i("b680"),i("d3b7"),i("0643"),i("2382"),i("fffc"),i("4e3e"),i("159b"),i("f8b7")),c=i("e782"),o=i("b705"),l=i("26c3"),u=i("2f62"),f=i("5a0c"),d=i.n(f),h=i("ed08"),p=i("986e"),m=i("fd99"),g={name:"CarRentalCreate",mixins:[m["a"]],computed:Object(r["a"])({},Object(u["b"])(["userInfo"])),data:function(){return{handleNumberLimit:h["c"],vehiclePropertiesPickerActiveIndex:0,pickRefreshNumber:0,showPlanBeginDate:!1,showPlanEndDate:!1,vehiclePropertiesPicker:!1,assigneeShow:!1,unitAndDeptName:"请选择",vehiclePropertiesOptions:[],carList:[],appendixList:[],carTypeIndex:0,originAssigneeList:[],assigneeList:[],fieldNames:{text:"name",value:"code",children:"children"},activeIndex:0,procDefId:"",candidateUser:[],formData:{usageUnitCode:"",usageUnitName:"",usageDeptCode:"",usageDeptName:"",creator:"",createPhone:"",planBeginDate:"请选择",planEndDate:"请选择",vehicleProperties:"",vehiclePropertiesName:"请选择",planRentPrice:"",rentApplydesc:""}}},created:function(){this.formData.creator=this.userInfo.realName,this.getVehiclePropertiesOptions(),p["a"].$off("unitConfirm"),p["a"].$on("unitConfirm",function(t){this.formData=Object.assign(this.formData,t),this.unitAndDeptName=this.formData.usageUnitName+" - "+this.formData.usageDeptName}.bind(this)),p["a"].$off("carTypeOneConfirm"),p["a"].$on("carTypeOneConfirm",function(t){this.carList[this.carTypeIndex].planCarType=t.carType,this.carList[this.carTypeIndex].planCarType2=t.carType2,this.carList[this.carTypeIndex].carTypeAll=t.carType+" - "+t.carType2}.bind(this)),this.addCarInfo()},methods:{getVehiclePropertiesOptions:function(){var t=this,e=this.$toast.loading({duration:0,message:"加载中..",forbidClick:!0});Object(o["a"])("10017").then((function(e){var i=e.data;t.vehiclePropertiesOptions=i})).catch((function(t){})).finally((function(){e.clear()}))},checkFileImage:function(t){var e=t.substr(t.lastIndexOf(".")+1);return"xlsx"==e||"xls"==e?"/static/file-excel.png":"pdf"==e?"/static/file-pdf.png":"jpg"==e||"png"==e||"jpeg"==e||"bmp"==e?"/static/file-img.png":"docx"==e||"doc"==e?"/static/file-doc.png":"txt"==e?"/static/file-txt.png":"ppt"==e?"/static/file-ppt.png":"/static/file-txt.png"},addCarInfo:function(){var t={carTypeAll:"",planCarType:"",planCarType2:"",planRentPrice:"",planCarBrand:"",planCarSeries:"",planMaxMens:"",planCapacity:"",planPrice:""};this.carList.push(t)},deleteCarInfo:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"是否删除车型信息?"}).then((function(){e.carList.splice(t,1),e.handlePlanRentPriceBlur()})).catch((function(){}))},handleUnitClick:function(){this.$router.push({name:"CarRentalSelectUnit",params:{}})},handleCarTypeClick:function(t){this.carTypeIndex=t,this.$router.push({name:"CarRentalSelectCarTypeOne",params:{}})},handlePlanRentPriceBlur:function(){var t=0;this.carList.forEach((function(e){t+=Number(e.planRentPrice)})),this.formData.planRentPrice=t.toFixed(2)},planBeginDateConfirm:function(t){this.formData.planBeginDate=this.parseTime(t,"{y}-{m}-{d}"),this.showPlanBeginDate=!1,this.checkVehicleProperties()},planEndDateConfirm:function(t){this.formData.planEndDate=this.parseTime(t,"{y}-{m}-{d}"),this.showPlanEndDate=!1,this.checkVehicleProperties()},checkVehicleProperties:function(){var t=this;if("请选择"!==this.formData.planBeginDate&&"请选择"!==this.formData.planEndDate){var e=d()(this.formData.planBeginDate),i=d()(this.formData.planEndDate),n=i.diff(e,"month")+1;this.formData.vehicleProperties=n>1?"2":"3";var a=this.vehiclePropertiesOptions.find((function(e){return e.code==t.formData.vehicleProperties}));this.formData.vehiclePropertiesName=a.name,this.vehiclePropertiesOptions.forEach((function(e){e.code==t.formData.vehicleProperties||"4"==e.code?e.disabled=!1:e.disabled=!0})),this.pickRefreshNumber++}},vehiclePropertiesConfirm:function(t){this.formData.vehiclePropertiesName=t.name,this.formData.vehicleProperties=t.code,this.vehiclePropertiesPicker=!1},beforeRead:function(t){var e=t.size/1024/1024<10,i=t.name.length<90;return e?!!i||(this.$notify({type:"warning",message:"上传文件名过长!"}),!1):(this.$notify({type:"warning",message:"上传文件大小不能超过 10MB!"}),!1)},afterReadTransfer:function(t){var e=this,i=new FormData;i.append("file",t.file),i.append("type","7"),t.status="uploading",t.message="上传中...",Object(l["j"])(i).then((function(i){var n=i.data;e.$notify({type:"success",message:"上传成功"}),t.status="done",t.message="",e.$set(n,"fileDesc",""),e.appendixList.push(n)})).catch((function(t){e.$notify({type:"warning",message:"上传失败"})}))},handleFileDelete:function(t){this.appendixList.splice(t,1)},handleAdopt:function(){var t=this;if(this.formData.usageUnitCode&&this.formData.usageDeptCode)if("请选择"!=this.formData.planBeginDate)if("请选择"!=this.formData.planEndDate){var e=d()(this.formData.planBeginDate),i=d()(this.formData.planEndDate);if(e.isAfter(i))this.$notify({type:"warning",message:"计划起租日期不能大于计划到期日期!"});else if(0!=this.carList.length){for(var n=0;n<this.carList.length;n++){if(!this.carList[n].planCarType&&"4"!==this.formData.vehicleProperties)return void this.$notify({type:"warning",message:"请选择车辆类型!"});if(!this.carList[n].planRentPrice)return void this.$notify({type:"warning",message:"请输入计划租赁价格!"});if(!this.carList[n].planCarBrand&&"4"!==this.formData.vehicleProperties)return void this.$notify({type:"warning",message:"请输入品牌!"});if(!this.carList[n].planCarSeries&&"4"!==this.formData.vehicleProperties)return void this.$notify({type:"warning",message:"请输入型号!"});if(!this.carList[n].planMaxMens&&"4"!==this.formData.vehicleProperties)return void this.$notify({type:"warning",message:"请输入座位数!"});if(!this.carList[n].planCapacity&&"4"!==this.formData.vehicleProperties)return void this.$notify({type:"warning",message:"请输入排气量!"});if(!this.carList[n].planPrice&&"4"!==this.formData.vehicleProperties)return void this.$notify({type:"warning",message:"请输入购车价格!"});if("微型客车"==this.carList[n].planCarType2||"轿车"==this.carList[n].planCarType2){if(this.carList[n].planCapacity>1.8)return void this.$notify({type:"warning",message:"排气量不能大于1.8!"})}else if(("SUV"==this.carList[n].planCarType2||"6-9座小型客车"==this.carList[n].planCarType2)&&this.carList[n].planCapacity>3)return void this.$notify({type:"warning",message:"排气量不能大于3.0!"});if("微型客车"==this.carList[n].planCarType2||"轿车"==this.carList[n].planCarType2){if(this.carList[n].planPrice>18e4)return void this.$notify({type:"warning",message:"购车价格不能大于180000!"})}else if("SUV"==this.carList[n].planCarType2||"6-9座小型客车"==this.carList[n].planCarType2){if(this.carList[n].planPrice>38e4)return void this.$notify({type:"warning",message:"购车价格不能大于380000!"})}else if(this.carList[n].planPrice>45e4)return void this.$notify({type:"warning",message:"购车价格不能大于450000!"})}if(this.formData.creator)if(this.formData.createPhone)if(this.formData.rentApplydesc)if(0!=this.appendixList.length){for(var a=0;a<this.appendixList.length;a++)if(!this.appendixList[a].fileDesc)return void this.$notify({type:"warning",message:"请填写附件说明!"});this.$dialog.confirm({title:"提示",message:"是否提交信息?"}).then((function(){var e="";e="3"==t.formData.vehicleProperties||"4"==t.formData.vehicleProperties?"公车短租":"公车租赁",Object(s["a"])({type:e}).then((function(e){var i=e.data;if(i.procDefId){if(i.procDefId)if(t.procDefId=i.procDefId,i.assignee)t.handleSubmit();else{t.originAssigneeList=t.getTreeData(i.assigneeList);var n=i.assigneeList.filter((function(t){return"0"===t.hide}));t.assigneeList=t.getTreeData(n),t.assigneeShow=!0}}else t.handleSubmit()}))})).catch((function(){}))}else this.$notify({type:"warning",message:"请上传租赁价格说明文件!"});else this.$notify({type:"warning",message:"请输入租赁描述!"});else this.$notify({type:"warning",message:"请输入申请人联系电话!"});else this.$notify({type:"warning",message:"请输入申请人!"})}else this.$notify({type:"warning",message:"请添加车辆信息!"})}else this.$notify({type:"warning",message:"请选择到期日期!"});else this.$notify({type:"warning",message:"请选择起租日期!"});else this.$notify({type:"warning",message:"请选择用车单位!"})},getTreeData:function(t){var e=[];return e.push({text:"",children:[]}),t.forEach((function(t){e[0].children.push({text:t.name,id:t.code})})),e},handleMoreClick:function(){this.assigneeList=this.originAssigneeList},handleTreeSelect:function(){this.candidateUser.length?(this.assigneeShow=!1,this.handleSubmit()):this.$notify({type:"warning",message:"请选择审批人!"})},handleSubmit:function(){var t=this,e=this.$toast.loading({duration:0,message:"提交中..",forbidClick:!0}),i={procDefId:this.procDefId,candidateUser:this.candidateUser};this.$set(this.formData,"status","1"),this.$set(i,"main",this.formData),this.$set(i,"details",this.carList);var n=[];this.appendixList.forEach((function(e,i){var a={};t.$set(a,"fileName",e.fileName),t.$set(a,"oldFileName",e.originalFileName),t.$set(a,"sort",i),t.$set(a,"type","1"),t.$set(a,"fileDesc",e.fileDesc),n.push(a)})),this.$set(i,"files",n),Object(c["e"])(i).then((function(e){var i=e.message;t.$notify({type:"success",message:i}),t.$router.push({name:"CarRentalList",params:{refresh:!0}})})).catch((function(e){t.$toast.fail("提交失败!")})).finally((function(){e.clear()}))}}},v=g,y=(i("4230"),i("2877")),b=Object(y["a"])(v,n,a,!1,null,"991e3de0",null);e["default"]=b.exports},b3c7:function(t,e,i){},baa5:function(t,e,i){"use strict";var n=i("23e7"),a=i("e58c");n({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},e58c:function(t,e,i){"use strict";var n=i("2ba4"),a=i("fc6a"),r=i("5926"),s=i("07fa"),c=i("a640"),o=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,f=c("lastIndexOf"),d=u||!f;t.exports=d?function(t){if(u)return n(l,this,arguments)||0;var e=a(this),i=s(e);if(0===i)return-1;var c=i-1;for(arguments.length>1&&(c=o(c,r(arguments[1]))),c<0&&(c=i+c);c>=0;c--)if(c in e&&e[c]===t)return c||0;return-1}:l},e782:function(t,e,i){"use strict";i.d(e,"h",(function(){return r})),i.d(e,"e",(function(){return s})),i.d(e,"i",(function(){return c})),i.d(e,"c",(function(){return o})),i.d(e,"f",(function(){return l})),i.d(e,"g",(function(){return u})),i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return d})),i.d(e,"d",(function(){return h}));i("99af");var n=i("b775"),a=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/api",BASE_URL:"/"}).VUE_APP_AUTH_SERVER;"".concat("/api","/").concat(a,"/minio/upload"),"".concat(a,"/minio/download");function r(t){return Object(n["a"])({url:"/vehicleRentMain/listPage",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/vehicleRentMain/add",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/vehicleRentMain/maintain/save",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/vehicleRentMain/maintain/confirm",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/vehicleRentMain/detail",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/vehicleRentMain/listActiviti",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/vehicleRentMain/complete",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/vehicleRentMain/reject",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/minio/download?fileName=".concat(t),method:"get",responseType:"blob"})}},f8b7:function(t,e,i){"use strict";i.d(e,"l",(function(){return a})),i.d(e,"m",(function(){return r})),i.d(e,"i",(function(){return s})),i.d(e,"j",(function(){return c})),i.d(e,"n",(function(){return o})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return f})),i.d(e,"k",(function(){return d})),i.d(e,"c",(function(){return h})),i.d(e,"a",(function(){return p})),i.d(e,"f",(function(){return m})),i.d(e,"h",(function(){return g})),i.d(e,"g",(function(){return v}));var n=i("b775");function a(t){return Object(n["a"])({url:"/order/getOrderDetail",method:"GET",params:t})}function r(t){return Object(n["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:t})}function s(t){return Object(n["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:t})}function c(t){return Object(n["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:t})}function o(t){return Object(n["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:t})}function l(t){return Object(n["a"])({url:"/activiti/assigneeList",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:t})}function f(t){return Object(n["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:t})}function d(t){return Object(n["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:t})}function h(t){return Object(n["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/activiti/assigneeListByType",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:t})}},fd99:function(t,e,i){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);