(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78484cc2"],{7185:function(t,e,s){"use strict";s.r(e);s("caad");var i=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"main-container"},[e("van-tabs",{attrs:{sticky:!0,type:"card",color:"#0571ff","title-active-color":"#ffffff","title-inactive-color":"#2e2e2e"},model:{value:t.menuActiveIndex,callback:function(e){t.menuActiveIndex=e},expression:"menuActiveIndex"}},[e("van-tab",{attrs:{title:"未完成"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.waitRefresh},model:{value:t.waitRefreshLoading,callback:function(e){t.waitRefreshLoading=e},expression:"waitRefreshLoading"}},[e("van-list",{attrs:{finished:t.waitFinished,"finished-text":"没有更多了..."},on:{load:t.getWaitOrderList},model:{value:t.waitLoading,callback:function(e){t.waitLoading=e},expression:"waitLoading"}},t._l(t.waitOrderList,(function(s,i){return e("div",{key:i,staticClass:"order-info-item box-container",on:{click:function(e){return t.handleWaitItemClick(s)}}},[e("ul",{staticClass:"list-ul"},[1==s.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[t._v("长途单")])]):t._e(),e("li",[e("span",[t._v("出发时间：")]),e("span",[t._v(t._s(s.usageTimeStr))])]),e("li",[e("span",[t._v("出"+t._s(" ")+t._s(" ")+"发"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(s.fromAddr.split(" ")[1]))])]),e("li",[e("span",[t._v("目"+t._s(" ")+t._s(" ")+"的"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(s.toAddr.split(" ")[1]))])]),e("li",[e("span",[t._v("优先保障：")]),e("span",[t._v(t._s(t.checkGuarantee(s.guarantee)))])]),[1,2,3,4,6].includes(s.status)?t._e():e("li",[e("span",[t._v("分派司机：")]),1==s.reqAssignments.length?e("span",[t._v(t._s(s.reqAssignments[0].driver.substr(0,1))+"师傅")]):s.reqAssignments.length>1?e("span",[t._v(t._s(s.reqAssignments[0].driver.substr(0,1))+"师傅"+t._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[t._v(t._s(s.reqAssignments.length))]),e("span",[t._v(t._s(" ")+"人")])]):t._e()]),[1,2,3,4,6].includes(s.status)?t._e():e("li",[e("span",[t._v("分派车辆：")]),1===s.reqAssignments.length?e("span",[t._v(t._s(s.reqAssignments[0].carBrand)+t._s(" ")+t._s(s.reqAssignments[0].carSeries))]):s.reqAssignments.length>1?e("span",[t._v(t._s(s.reqAssignments[0].carBrand)+t._s(" ")+t._s(s.reqAssignments[0].carSeries)+t._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[t._v(t._s(s.reqAssignments.length))]),e("span",[t._v(t._s(" ")+"辆")])]):t._e()]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(s.status)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(s.status)))])]),![1,2,3,4,6].includes(s.status)&&s.reqAssignments.length>0?e("img",{attrs:{src:t.checkCarImagePath(s.reqAssignments[0].carBrand,s.reqAssignments[0].carSeries)}}):t._e()])])})),0)],1)],1),e("van-tab",{attrs:{title:"历史订单"}},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.historyRefresh},model:{value:t.historyRefreshLoading,callback:function(e){t.historyRefreshLoading=e},expression:"historyRefreshLoading"}},[e("van-list",{attrs:{finished:t.historyFinished,"finished-text":"没有更多了..."},on:{load:t.getHistoryOrderList},model:{value:t.historyLoading,callback:function(e){t.historyLoading=e},expression:"historyLoading"}},t._l(t.historyOrderList,(function(s,i){return e("div",{key:i,staticClass:"order-info-item box-container",on:{click:function(e){return t.handleHistoryItemClick(s)}}},[e("ul",{staticClass:"list-ul"},[1===s.longDistanceTag?e("li",{staticClass:"li-item-long"},[e("i",{staticClass:"order-long"}),e("span",[t._v("长途单")])]):t._e(),e("li",[e("span",[t._v("出发时间：")]),e("span",[t._v(t._s(s.usageTimeStr))])]),e("li",[e("span",[t._v("出"+t._s(" ")+t._s(" ")+"发"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(s.fromAddr.split(" ")[1]))])]),e("li",[e("span",[t._v("目"+t._s(" ")+t._s(" ")+"的"+t._s(" ")+t._s(" ")+"地：")]),e("span",[t._v(t._s(s.toAddr.split(" ")[1]))])]),e("li",[e("span",[t._v("优先保障：")]),e("span",[t._v(t._s(t.checkGuarantee(s.guarantee)))])]),[1,2,3,4,6].includes(s.status)?t._e():e("li",[e("span",[t._v("分派司机：")]),1===s.reqAssignments.length?e("span",[t._v(t._s(s.reqAssignments[0].driver.substr(0,1))+"师傅")]):s.reqAssignments.length>1?e("span",[t._v(t._s(s.reqAssignments[0].driver.substr(0,1))+"师傅"+t._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[t._v(t._s(s.reqAssignments.length))]),e("span",[t._v(t._s(" ")+"人")])]):t._e()]),[1,2,3,4,6].includes(s.status)?t._e():e("li",[e("span",[t._v("分派车辆：")]),1===s.reqAssignments.length?e("span",[t._v(t._s(s.reqAssignments[0].carBrand)+t._s(" ")+t._s(s.reqAssignments[0].carSeries))]):s.reqAssignments.length>1?e("span",[t._v(t._s(s.reqAssignments[0].carBrand)+t._s(" ")+t._s(s.reqAssignments[0].carSeries)+t._s(" ")+"等 "),e("span",{staticStyle:{color:"#0571ff","font-weight":"600"}},[t._v(t._s(s.reqAssignments.length))]),e("span",[t._v(t._s(" ")+"辆")])]):t._e()]),e("div",{staticClass:"li-status"},[e("i",{staticClass:"default-icon-i",class:t.checkStatusImage(s.status)}),e("span",{staticClass:"status-text"},[t._v(t._s(t.checkOrderStatus(s.status)))])]),![1,2,3,4,6].includes(s.status)&&s.reqAssignments.length>0?e("img",{attrs:{src:t.checkCarImagePath(s.reqAssignments[0].carBrand,s.reqAssignments[0].carSeries)}}):t._e()])])})),0)],1)],1)],1),e("div",{staticClass:"add-btn",on:{click:t.goStartApplyClick}})],1)},n=[],r=s("2909"),a=(s("99af"),s("7db0"),s("14d9"),s("d3b7"),s("0643"),s("fffc"),s("f8b7")),o=s("b705"),c=s("2f62"),u=s("0b8e"),d=s("fd99"),l={name:"OutstandOrder",mixins:[d["a"]],computed:Object(c["b"])("CarApplication",["isFefresh"]),beforeRouteEnter:function(t,e,s){s((function(e){var s=setTimeout((function(){e.$refs.container.scrollTop=t.meta.scrollTop,clearTimeout(s)}),0)}))},beforeRouteLeave:function(t,e,s){if("OrderDetail"===t.name||"StartApplying"===t.name){var i=this.$refs.container,n=i.scrollTop;e.meta.scrollTop=n}s()},data:function(){return{menuActiveIndex:0,waitOrderList:[],waitRefreshLoading:!1,waitLoading:!1,waitFinished:!1,waitListQuery:{pageNum:1,pageSize:10},historyOrderList:[],historyRefreshLoading:!1,historyLoading:!1,historyFinished:!1,historyListQuery:{pageNum:1,pageSize:10},orderStatusOptions:[],guaranteeOptions:[],checkCarImagePath:u["a"]}},created:function(){this.menuActiveIndex=this.$route.params.menuActiveIndex,this.getOrderStatusOptions(),this.getGuaranteeOptions()},activated:function(){this.isFefresh&&(this.waitRefresh(),this.historyRefresh(),this.$store.dispatch("CarApplication/triggerFefresh",!1)),this.$store.commit("removeThisPage","StartApplying"),this.$store.commit("removeThisPage","PerfectInfo"),this.$store.commit("removeThisPage","OrderDetail")},methods:{getOrderStatusOptions:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0});Object(o["a"])("1522830760585670657").then((function(e){var s=e.data;t.orderStatusOptions=s})).catch((function(t){})).finally((function(){e.clear()}))},getGuaranteeOptions:function(){var t=this;Object(o["a"])("1679651627836055552").then((function(e){var s=e.data;t.guaranteeOptions=s})).catch((function(t){}))},getWaitOrderList:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),s={isFinsh:"2"};Object(a["m"])(Object.assign({},s,this.waitListQuery)).then((function(e){var s=e.data;t.waitRefreshLoading&&(t.waitOrderList=[],t.waitRefreshLoading=!1),t.waitLoading=!1,t.waitOrderList=[].concat(Object(r["a"])(t.waitOrderList),Object(r["a"])(s.list)),s.hasNextPage?t.waitListQuery.pageNum=t.waitListQuery.pageNum+1:t.waitFinished=!0})).catch((function(e){t.waitLoading=!1,t.waitFinished=!0})).finally((function(){e.clear()}))},getHistoryOrderList:function(){var t=this,e=this.$toast.loading({duration:0,message:"正在加载...",forbidClick:!0}),s={isFinsh:"1"};Object(a["m"])(Object.assign({},s,this.historyListQuery)).then((function(e){var s=e.data;t.historyRefreshLoading&&(t.historyOrderList=[],t.historyRefreshLoading=!1),t.historyLoading=!1,t.historyOrderList=[].concat(Object(r["a"])(t.historyOrderList),Object(r["a"])(s.list)),s.hasNextPage?t.historyListQuery.pageNum=t.historyListQuery.pageNum+1:t.historyFinished=!0})).catch((function(e){t.historyLoading=!1,t.historyFinished=!0})).finally((function(){e.clear()}))},checkOrderStatus:function(t){var e=this.orderStatusOptions.find((function(e){return e.code==t}));return e?e.name:""},checkGuarantee:function(t){var e=this.guaranteeOptions.find((function(e){return e.code==t}));return e?e.name:""},checkStatusImage:function(t){return 1===t?"order-dsh":2===t?"order-shz":3===t?"order-ybh":4===t?"order-dpd":5===t?"order-ypd":6===t?"order-yqx":7===t||8===t?"order-yjd":9===t?"order-ycc":10===t?"order-yhc":11===t?"order-yqr":void 0},handleWaitItemClick:function(t){this.$router.push({name:"OrderDetail",params:{id:t.id}})},handleHistoryItemClick:function(t){this.$router.push({name:"OrderDetail",params:{id:t.id}})},goStartApplyClick:function(){this.$router.push({name:"StartApplying",params:{id:"0"}})},waitRefresh:function(){this.waitRefreshLoading=!0,this.waitLoading=!0,this.waitFinished=!1,this.waitListQuery.pageNum=1,this.getWaitOrderList()},historyRefresh:function(){this.historyRefreshLoading=!0,this.historyLoading=!0,this.historyFinished=!1,this.historyListQuery.pageNum=1,this.getHistoryOrderList()}}},h=l,f=(s("7810"),s("2877")),g=Object(f["a"])(h,i,n,!1,null,"73f72a74",null);e["default"]=g.exports},7810:function(t,e,s){"use strict";s("85f0")},"85f0":function(t,e,s){},f8b7:function(t,e,s){"use strict";s.d(e,"l",(function(){return n})),s.d(e,"m",(function(){return r})),s.d(e,"i",(function(){return a})),s.d(e,"j",(function(){return o})),s.d(e,"n",(function(){return c})),s.d(e,"b",(function(){return u})),s.d(e,"d",(function(){return d})),s.d(e,"e",(function(){return l})),s.d(e,"k",(function(){return h})),s.d(e,"c",(function(){return f})),s.d(e,"a",(function(){return g})),s.d(e,"f",(function(){return m})),s.d(e,"h",(function(){return p})),s.d(e,"g",(function(){return _}));var i=s("b775");function n(t){return Object(i["a"])({url:"/order/getOrderDetail",method:"GET",params:t})}function r(t){return Object(i["a"])({url:"/gcywVehicleRequest/dispatchListInfoH5",method:"GET",params:t})}function a(t){return Object(i["a"])({url:"/gcywVehicleRequestLog/list",method:"GET",params:t})}function o(t){return Object(i["a"])({url:"/gcywVehicleRequest/cancelVehicleRequest",method:"POST",data:t})}function c(t){return Object(i["a"])({url:"/gcywVehicleRequest/activiti/reject",method:"POST",data:t})}function u(t){return Object(i["a"])({url:"/activiti/assigneeList",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/gcywVehicleRequest/activiti/complete",method:"POST",data:t})}function l(t){return Object(i["a"])({url:"/gcywVehicleRequest/listPage",method:"GET",params:t})}function h(t){return Object(i["a"])({url:"/gcywVehicleRequest/confirmVehicleRequest",method:"POST",data:t})}function f(t){return Object(i["a"])({url:"/gcywVehicleRequest/addVehicleRequest",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/activiti/assigneeListByType",method:"get",params:t})}function m(t){return Object(i["a"])({url:"/gcywVehicleRequest/dispatchList",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/gcywVehicleRequestLog/list",method:"get",params:t})}function _(t){return Object(i["a"])({url:"/gcywVehicleRequest/listPageForH5",method:"get",params:t})}},fd99:function(t,e,s){"use strict";e["a"]={created:function(){this.$options.name||console.warn("缓存页面失败！没有设置组件名！"),this.$store.commit("keepThisPage",this.$options.name)},beforeDestroy:function(){}}}}]);